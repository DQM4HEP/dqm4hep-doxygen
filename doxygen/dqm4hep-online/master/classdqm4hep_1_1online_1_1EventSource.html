<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>DQMOnline: dqm4hep::online::EventSource Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">DQMOnline
   &#160;<span id="projectnumber">1.2.3</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacedqm4hep.html">dqm4hep</a></li><li class="navelem"><a class="el" href="namespacedqm4hep_1_1online.html">online</a></li><li class="navelem"><a class="el" href="classdqm4hep_1_1online_1_1EventSource.html">EventSource</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pri-types">Private Types</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classdqm4hep_1_1online_1_1EventSource-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">dqm4hep::online::EventSource Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><a class="el" href="classdqm4hep_1_1online_1_1EventSource.html" title="EventSource class. ">EventSource</a> class.  
 <a href="classdqm4hep_1_1online_1_1EventSource.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="EventSource_8h_source.html">EventSource.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdqm4hep_1_1online_1_1EventSource_1_1CollectorInfo.html">CollectorInfo</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="structdqm4hep_1_1online_1_1EventSource_1_1CollectorInfo.html" title="CollectorInfo struct. ">CollectorInfo</a> struct.  <a href="structdqm4hep_1_1online_1_1EventSource_1_1CollectorInfo.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ad647155972b0eb3f7d94fda0d33df177"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdqm4hep_1_1online_1_1EventSource.html#ad647155972b0eb3f7d94fda0d33df177">~EventSource</a> ()</td></tr>
<tr class="memdesc:ad647155972b0eb3f7d94fda0d33df177"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor.  <a href="#ad647155972b0eb3f7d94fda0d33df177">More...</a><br/></td></tr>
<tr class="separator:ad647155972b0eb3f7d94fda0d33df177"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c7a4052807e6d719e41dbf37331cebb"><td class="memItemLeft" align="right" valign="top">const std::string &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdqm4hep_1_1online_1_1EventSource.html#a0c7a4052807e6d719e41dbf37331cebb">sourceName</a> () const </td></tr>
<tr class="memdesc:a0c7a4052807e6d719e41dbf37331cebb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the source name.  <a href="#a0c7a4052807e6d719e41dbf37331cebb">More...</a><br/></td></tr>
<tr class="separator:a0c7a4052807e6d719e41dbf37331cebb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02cbf93b8d987c7e3a26d148a6e40d94"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdqm4hep_1_1online_1_1EventSource.html#a02cbf93b8d987c7e3a26d148a6e40d94">setStreamerName</a> (const std::string &amp;name)</td></tr>
<tr class="memdesc:a02cbf93b8d987c7e3a26d148a6e40d94"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the event streamer name.  <a href="#a02cbf93b8d987c7e3a26d148a6e40d94">More...</a><br/></td></tr>
<tr class="separator:a02cbf93b8d987c7e3a26d148a6e40d94"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a719c2ed712f1df02d7bf068aaaf80487"><td class="memItemLeft" align="right" valign="top">const std::string &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdqm4hep_1_1online_1_1EventSource.html#a719c2ed712f1df02d7bf068aaaf80487">streamerName</a> () const </td></tr>
<tr class="memdesc:a719c2ed712f1df02d7bf068aaaf80487"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the event streamer name.  <a href="#a719c2ed712f1df02d7bf068aaaf80487">More...</a><br/></td></tr>
<tr class="separator:a719c2ed712f1df02d7bf068aaaf80487"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67ad7a32fea642021dff3aa87788979c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdqm4hep_1_1online_1_1EventSource.html#a67ad7a32fea642021dff3aa87788979c">addCollector</a> (const std::string &amp;name)</td></tr>
<tr class="memdesc:a67ad7a32fea642021dff3aa87788979c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a new collector server to which events will be sent.  <a href="#a67ad7a32fea642021dff3aa87788979c">More...</a><br/></td></tr>
<tr class="separator:a67ad7a32fea642021dff3aa87788979c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25ff0612616b74305d8819d721df1a58"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdqm4hep_1_1online_1_1EventSource.html#a25ff0612616b74305d8819d721df1a58">start</a> ()</td></tr>
<tr class="memdesc:a25ff0612616b74305d8819d721df1a58"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start the event source.  <a href="#a25ff0612616b74305d8819d721df1a58">More...</a><br/></td></tr>
<tr class="separator:a25ff0612616b74305d8819d721df1a58"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac36c3d98396cc0cb99031852b865f983"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdqm4hep_1_1online_1_1EventSource.html#ac36c3d98396cc0cb99031852b865f983">sendEvent</a> (const core::EventPtr &amp;event)</td></tr>
<tr class="memdesc:ac36c3d98396cc0cb99031852b865f983"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a single event to all registered collectors.  <a href="#ac36c3d98396cc0cb99031852b865f983">More...</a><br/></td></tr>
<tr class="separator:ac36c3d98396cc0cb99031852b865f983"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8bd5f838fabd756b47cb9c7adae3f098"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdqm4hep_1_1online_1_1EventSource.html#a8bd5f838fabd756b47cb9c7adae3f098">sendEvent</a> (const std::string &amp;collector, const core::EventPtr &amp;event)</td></tr>
<tr class="memdesc:a8bd5f838fabd756b47cb9c7adae3f098"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a single event to a single collector.  <a href="#a8bd5f838fabd756b47cb9c7adae3f098">More...</a><br/></td></tr>
<tr class="separator:a8bd5f838fabd756b47cb9c7adae3f098"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3748da8c9341e3df6a101d463a4eb797"><td class="memItemLeft" align="right" valign="top">core::EventPtr&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdqm4hep_1_1online_1_1EventSource.html#a3748da8c9341e3df6a101d463a4eb797">createEvent</a> () const </td></tr>
<tr class="separator:a3748da8c9341e3df6a101d463a4eb797"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a06989071e1e556bfd4534a18b7277a76"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="namespacedqm4hep_1_1online.html#aa39d9cd1ccd9f19b5502de15957a34da">EventSourcePtr</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdqm4hep_1_1online_1_1EventSource.html#a06989071e1e556bfd4534a18b7277a76">make_shared</a> (const std::string &amp;<a class="el" href="classdqm4hep_1_1online_1_1EventSource.html#a0c7a4052807e6d719e41dbf37331cebb">sourceName</a>)</td></tr>
<tr class="memdesc:a06989071e1e556bfd4534a18b7277a76"><td class="mdescLeft">&#160;</td><td class="mdescRight">Factory method to create a shared pointer of event source.  <a href="#a06989071e1e556bfd4534a18b7277a76">More...</a><br/></td></tr>
<tr class="separator:a06989071e1e556bfd4534a18b7277a76"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-types"></a>
Private Types</h2></td></tr>
<tr class="memitem:ae275cccf4a6daaf46ad8d87b15f22f2b"><td class="memItemLeft" align="right" valign="top">typedef std::shared_ptr<br class="typebreak"/>
&lt; core::EventStreamer &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdqm4hep_1_1online_1_1EventSource.html#ae275cccf4a6daaf46ad8d87b15f22f2b">EventStreamerPtr</a></td></tr>
<tr class="separator:ae275cccf4a6daaf46ad8d87b15f22f2b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa38eebd6abd63064deeb583b54adc1c4"><td class="memItemLeft" align="right" valign="top">typedef std::shared_ptr<br class="typebreak"/>
&lt; xdrstream::BufferDevice &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdqm4hep_1_1online_1_1EventSource.html#aa38eebd6abd63064deeb583b54adc1c4">BufferDevicePtr</a></td></tr>
<tr class="separator:aa38eebd6abd63064deeb583b54adc1c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a24dd92e30ac741f8aeb2466f1d86aad8"><td class="memItemLeft" align="right" valign="top">typedef std::map&lt; std::string, <br class="typebreak"/>
<a class="el" href="structdqm4hep_1_1online_1_1EventSource_1_1CollectorInfo.html">CollectorInfo</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdqm4hep_1_1online_1_1EventSource.html#a24dd92e30ac741f8aeb2466f1d86aad8">CollectorInfoMap</a></td></tr>
<tr class="separator:a24dd92e30ac741f8aeb2466f1d86aad8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:aa72aa0d322337e7e9cdccea5992fe560"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdqm4hep_1_1online_1_1EventSource.html#aa72aa0d322337e7e9cdccea5992fe560">getSourceInfo</a> (core::json &amp;info)</td></tr>
<tr class="memdesc:aa72aa0d322337e7e9cdccea5992fe560"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the source info (host info + source info)  <a href="#aa72aa0d322337e7e9cdccea5992fe560">More...</a><br/></td></tr>
<tr class="separator:aa72aa0d322337e7e9cdccea5992fe560"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7c992768da87cfd3557b4544a3bdd76"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdqm4hep_1_1online_1_1EventSource.html#ae7c992768da87cfd3557b4544a3bdd76">registerMe</a> (const std::string &amp;collector, const core::json &amp;info)</td></tr>
<tr class="memdesc:ae7c992768da87cfd3557b4544a3bdd76"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register the event source to the specified collector.  <a href="#ae7c992768da87cfd3557b4544a3bdd76">More...</a><br/></td></tr>
<tr class="separator:ae7c992768da87cfd3557b4544a3bdd76"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2afa8b71476aadbd125e68f0fc3aa7fa"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdqm4hep_1_1online_1_1EventSource.html#a2afa8b71476aadbd125e68f0fc3aa7fa">unregisterMe</a> (const std::string &amp;collector)</td></tr>
<tr class="memdesc:a2afa8b71476aadbd125e68f0fc3aa7fa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Un-register the event source from the specified collector.  <a href="#a2afa8b71476aadbd125e68f0fc3aa7fa">More...</a><br/></td></tr>
<tr class="separator:a2afa8b71476aadbd125e68f0fc3aa7fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1515effbaebe87fe215a4dde56940a81"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdqm4hep_1_1online_1_1EventSource.html#a1515effbaebe87fe215a4dde56940a81">sendEvent</a> (const core::StringVector &amp;collectors, const core::EventPtr &amp;event)</td></tr>
<tr class="memdesc:a1515effbaebe87fe215a4dde56940a81"><td class="mdescLeft">&#160;</td><td class="mdescRight">Perform the actual event sending to the specified list of collectors.  <a href="#a1515effbaebe87fe215a4dde56940a81">More...</a><br/></td></tr>
<tr class="separator:a1515effbaebe87fe215a4dde56940a81"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a63c228ca9cf0b22d09216e98be3b5400"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdqm4hep_1_1online_1_1EventSource.html#a63c228ca9cf0b22d09216e98be3b5400">EventSource</a> (const std::string &amp;<a class="el" href="classdqm4hep_1_1online_1_1EventSource.html#a0c7a4052807e6d719e41dbf37331cebb">sourceName</a>)</td></tr>
<tr class="memdesc:a63c228ca9cf0b22d09216e98be3b5400"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor.  <a href="#a63c228ca9cf0b22d09216e98be3b5400">More...</a><br/></td></tr>
<tr class="separator:a63c228ca9cf0b22d09216e98be3b5400"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:ab4761b3a8abaa6219553bb7078d0fe78"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdqm4hep_1_1online_1_1EventSource.html#ab4761b3a8abaa6219553bb7078d0fe78">m_started</a> = false</td></tr>
<tr class="memdesc:ab4761b3a8abaa6219553bb7078d0fe78"><td class="mdescLeft">&#160;</td><td class="mdescRight">Whether the event source was started.  <a href="#ab4761b3a8abaa6219553bb7078d0fe78">More...</a><br/></td></tr>
<tr class="separator:ab4761b3a8abaa6219553bb7078d0fe78"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae3a7d1e7404b31e1d63fac960632b62e"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdqm4hep_1_1online_1_1EventSource.html#ae3a7d1e7404b31e1d63fac960632b62e">m_sourceName</a> = &quot;&quot;</td></tr>
<tr class="memdesc:ae3a7d1e7404b31e1d63fac960632b62e"><td class="mdescLeft">&#160;</td><td class="mdescRight">The source name.  <a href="#ae3a7d1e7404b31e1d63fac960632b62e">More...</a><br/></td></tr>
<tr class="separator:ae3a7d1e7404b31e1d63fac960632b62e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c08eea4e0926c4657d405eec1385815"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdqm4hep_1_1online_1_1EventSource.html#a4c08eea4e0926c4657d405eec1385815">m_streamerName</a> = &quot;&quot;</td></tr>
<tr class="memdesc:a4c08eea4e0926c4657d405eec1385815"><td class="mdescLeft">&#160;</td><td class="mdescRight">The event streamer name (plugin name)  <a href="#a4c08eea4e0926c4657d405eec1385815">More...</a><br/></td></tr>
<tr class="separator:a4c08eea4e0926c4657d405eec1385815"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf86d725b4ed7be168ca780ac3efbe53"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classdqm4hep_1_1online_1_1EventSource.html#ae275cccf4a6daaf46ad8d87b15f22f2b">EventStreamerPtr</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdqm4hep_1_1online_1_1EventSource.html#acf86d725b4ed7be168ca780ac3efbe53">m_eventStreamer</a> = {nullptr}</td></tr>
<tr class="memdesc:acf86d725b4ed7be168ca780ac3efbe53"><td class="mdescLeft">&#160;</td><td class="mdescRight">The event streamer pointer.  <a href="#acf86d725b4ed7be168ca780ac3efbe53">More...</a><br/></td></tr>
<tr class="separator:acf86d725b4ed7be168ca780ac3efbe53"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab677c42a2ba64a89b25b54a1c5f95306"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classdqm4hep_1_1online_1_1EventSource.html#a24dd92e30ac741f8aeb2466f1d86aad8">CollectorInfoMap</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdqm4hep_1_1online_1_1EventSource.html#ab677c42a2ba64a89b25b54a1c5f95306">m_collectorInfos</a> = {}</td></tr>
<tr class="memdesc:ab677c42a2ba64a89b25b54a1c5f95306"><td class="mdescLeft">&#160;</td><td class="mdescRight">The map of event collector infos.  <a href="#ab677c42a2ba64a89b25b54a1c5f95306">More...</a><br/></td></tr>
<tr class="separator:ab677c42a2ba64a89b25b54a1c5f95306"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35e526f1e321736f786fb3be287017b4"><td class="memItemLeft" align="right" valign="top">net::Client&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdqm4hep_1_1online_1_1EventSource.html#a35e526f1e321736f786fb3be287017b4">m_client</a></td></tr>
<tr class="memdesc:a35e526f1e321736f786fb3be287017b4"><td class="mdescLeft">&#160;</td><td class="mdescRight">The networking client interface.  <a href="#a35e526f1e321736f786fb3be287017b4">More...</a><br/></td></tr>
<tr class="separator:a35e526f1e321736f786fb3be287017b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8998da547fe7fa59b6bc03fe77c44ec0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classdqm4hep_1_1online_1_1EventSource.html#aa38eebd6abd63064deeb583b54adc1c4">BufferDevicePtr</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdqm4hep_1_1online_1_1EventSource.html#a8998da547fe7fa59b6bc03fe77c44ec0">m_bufferDevice</a> = {nullptr}</td></tr>
<tr class="memdesc:a8998da547fe7fa59b6bc03fe77c44ec0"><td class="mdescLeft">&#160;</td><td class="mdescRight">The serialized event raw buffer (from xdrstream)  <a href="#a8998da547fe7fa59b6bc03fe77c44ec0">More...</a><br/></td></tr>
<tr class="separator:a8998da547fe7fa59b6bc03fe77c44ec0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p><a class="el" href="classdqm4hep_1_1online_1_1EventSource.html" title="EventSource class. ">EventSource</a> class. </p>
<p>Main interface for sending events to collectors (server process). Only one event source is allowed per process as the source is registered using the network client id on the collector server side. It is possible to send events to multiple event collectors. A typical usage could be: </p>
<div class="fragment"><div class="line"><a class="code" href="namespacedqm4hep_1_1online.html#aa39d9cd1ccd9f19b5502de15957a34da">EventSourcePtr</a> source = <a class="code" href="classdqm4hep_1_1online_1_1EventSource.html#a06989071e1e556bfd4534a18b7277a76">EventSource::make_shared</a>(<span class="stringliteral">&quot;EventBuilder&quot;</span>);</div>
<div class="line">source-&gt;setStreamerName(<span class="stringliteral">&quot;GenericEventStreamer&quot;</span>);</div>
<div class="line">source-&gt;addCollector(<span class="stringliteral">&quot;CentralCollector&quot;</span>);</div>
<div class="line">source-&gt;addCollector(<span class="stringliteral">&quot;PrivateCollector&quot;</span>);</div>
<div class="line">source-&gt;start();</div>
<div class="line"><span class="comment">// ...</span></div>
<div class="line">core::EventPtr <span class="keyword">event</span> = getLastEvent(); <span class="comment">// hypothetical getter function  </span></div>
<div class="line">source-&gt;sendEvent(event); <span class="comment">// send to all collectors</span></div>
</div><!-- fragment --> 
<p>Definition at line <a class="el" href="EventSource_8h_source.html#l00067">67</a> of file <a class="el" href="EventSource_8h_source.html">EventSource.h</a>.</p>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a class="anchor" id="aa38eebd6abd63064deeb583b54adc1c4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::shared_ptr&lt;xdrstream::BufferDevice&gt; <a class="el" href="classdqm4hep_1_1online_1_1EventSource.html#aa38eebd6abd63064deeb583b54adc1c4">dqm4hep::online::EventSource::BufferDevicePtr</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="EventSource_8h_source.html#l00188">188</a> of file <a class="el" href="EventSource_8h_source.html">EventSource.h</a>.</p>

</div>
</div>
<a class="anchor" id="a24dd92e30ac741f8aeb2466f1d86aad8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::map&lt;std::string, <a class="el" href="structdqm4hep_1_1online_1_1EventSource_1_1CollectorInfo.html">CollectorInfo</a>&gt; <a class="el" href="classdqm4hep_1_1online_1_1EventSource.html#a24dd92e30ac741f8aeb2466f1d86aad8">dqm4hep::online::EventSource::CollectorInfoMap</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="EventSource_8h_source.html#l00189">189</a> of file <a class="el" href="EventSource_8h_source.html">EventSource.h</a>.</p>

</div>
</div>
<a class="anchor" id="ae275cccf4a6daaf46ad8d87b15f22f2b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::shared_ptr&lt;core::EventStreamer&gt; <a class="el" href="classdqm4hep_1_1online_1_1EventSource.html#ae275cccf4a6daaf46ad8d87b15f22f2b">dqm4hep::online::EventSource::EventStreamerPtr</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="EventSource_8h_source.html#l00187">187</a> of file <a class="el" href="EventSource_8h_source.html">EventSource.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="ad647155972b0eb3f7d94fda0d33df177"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">dqm4hep::online::EventSource::~EventSource </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Destructor. </p>

<p>Definition at line <a class="el" href="EventSource_8cc_source.html#l00053">53</a> of file <a class="el" href="EventSource_8cc_source.html">EventSource.cc</a>.</p>

<p>References <a class="el" href="EventSource_8h_source.html#l00195">m_collectorInfos</a>, and <a class="el" href="EventSource_8cc_source.html#l00294">unregisterMe()</a>.</p>
<div class="fragment"><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    {</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;      <span class="keywordflow">for</span>(<span class="keyword">auto</span> colIter : <a class="code" href="classdqm4hep_1_1online_1_1EventSource.html#ab677c42a2ba64a89b25b54a1c5f95306">m_collectorInfos</a>)</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;        this-&gt;<a class="code" href="classdqm4hep_1_1online_1_1EventSource.html#a2afa8b71476aadbd125e68f0fc3aa7fa">unregisterMe</a>(colIter.first);</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    }</div>
<div class="ttc" id="classdqm4hep_1_1online_1_1EventSource_html_ab677c42a2ba64a89b25b54a1c5f95306"><div class="ttname"><a href="classdqm4hep_1_1online_1_1EventSource.html#ab677c42a2ba64a89b25b54a1c5f95306">dqm4hep::online::EventSource::m_collectorInfos</a></div><div class="ttdeci">CollectorInfoMap m_collectorInfos</div><div class="ttdoc">The map of event collector infos. </div><div class="ttdef"><b>Definition:</b> <a href="EventSource_8h_source.html#l00195">EventSource.h:195</a></div></div>
<div class="ttc" id="classdqm4hep_1_1online_1_1EventSource_html_a2afa8b71476aadbd125e68f0fc3aa7fa"><div class="ttname"><a href="classdqm4hep_1_1online_1_1EventSource.html#a2afa8b71476aadbd125e68f0fc3aa7fa">dqm4hep::online::EventSource::unregisterMe</a></div><div class="ttdeci">void unregisterMe(const std::string &amp;collector)</div><div class="ttdoc">Un-register the event source from the specified collector. </div><div class="ttdef"><b>Definition:</b> <a href="EventSource_8cc_source.html#l00294">EventSource.cc:294</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a63c228ca9cf0b22d09216e98be3b5400"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">dqm4hep::online::EventSource::EventSource </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>sourceName</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Constructor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sourceName</td><td>the source name </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="EventSource_8cc_source.html#l00045">45</a> of file <a class="el" href="EventSource_8cc_source.html">EventSource.cc</a>.</p>

<p>Referenced by <a class="el" href="EventSource_8cc_source.html#l00038">make_shared()</a>.</p>
<div class="fragment"><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;                                                        :</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;        <a class="code" href="classdqm4hep_1_1online_1_1EventSource.html#ae3a7d1e7404b31e1d63fac960632b62e">m_sourceName</a>(<a class="code" href="classdqm4hep_1_1online_1_1EventSource.html#a0c7a4052807e6d719e41dbf37331cebb">sourceName</a>)</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    {</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;      <span class="comment">/* nop */</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    }</div>
<div class="ttc" id="classdqm4hep_1_1online_1_1EventSource_html_a0c7a4052807e6d719e41dbf37331cebb"><div class="ttname"><a href="classdqm4hep_1_1online_1_1EventSource.html#a0c7a4052807e6d719e41dbf37331cebb">dqm4hep::online::EventSource::sourceName</a></div><div class="ttdeci">const std::string &amp; sourceName() const </div><div class="ttdoc">Get the source name. </div><div class="ttdef"><b>Definition:</b> <a href="EventSource_8cc_source.html#l00061">EventSource.cc:61</a></div></div>
<div class="ttc" id="classdqm4hep_1_1online_1_1EventSource_html_ae3a7d1e7404b31e1d63fac960632b62e"><div class="ttname"><a href="classdqm4hep_1_1online_1_1EventSource.html#ae3a7d1e7404b31e1d63fac960632b62e">dqm4hep::online::EventSource::m_sourceName</a></div><div class="ttdeci">std::string m_sourceName</div><div class="ttdoc">The source name. </div><div class="ttdef"><b>Definition:</b> <a href="EventSource_8h_source.html#l00192">EventSource.h:192</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a67ad7a32fea642021dff3aa87788979c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dqm4hep::online::EventSource::addCollector </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add a new collector server to which events will be sent. </p>
<p>Can be used only before calling <a class="el" href="classdqm4hep_1_1online_1_1EventSource.html#a25ff0612616b74305d8819d721df1a58" title="Start the event source. ">start()</a>. Must be called at least one time before calling <a class="el" href="classdqm4hep_1_1online_1_1EventSource.html#a25ff0612616b74305d8819d721df1a58" title="Start the event source. ">start()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>the event collector name </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="EventSource_8cc_source.html#l00085">85</a> of file <a class="el" href="EventSource_8cc_source.html">EventSource.cc</a>.</p>

<p>References <a class="el" href="EventSource_8h_source.html#l00195">m_collectorInfos</a>, <a class="el" href="EventSource_8h_source.html#l00183">dqm4hep::online::EventSource::CollectorInfo::m_registered</a>, and <a class="el" href="EventSource_8h_source.html#l00191">m_started</a>.</p>
<div class="fragment"><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    {</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;      <span class="keywordflow">if</span>(<a class="code" href="classdqm4hep_1_1online_1_1EventSource.html#ab4761b3a8abaa6219553bb7078d0fe78">m_started</a>)</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;        <span class="keywordflow">throw</span> core::StatusCodeException(core::STATUS_CODE_NOT_ALLOWED);</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;      </div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;      <span class="keyword">auto</span> findIter = <a class="code" href="classdqm4hep_1_1online_1_1EventSource.html#ab677c42a2ba64a89b25b54a1c5f95306">m_collectorInfos</a>.find(name);</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;      </div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;      <span class="keywordflow">if</span>(<a class="code" href="classdqm4hep_1_1online_1_1EventSource.html#ab677c42a2ba64a89b25b54a1c5f95306">m_collectorInfos</a>.end() != findIter)</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        <span class="keywordflow">throw</span> core::StatusCodeException(core::STATUS_CODE_ALREADY_PRESENT);</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;      </div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;      CollectorInfo info;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;      info.m_registered = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;      <a class="code" href="classdqm4hep_1_1online_1_1EventSource.html#ab677c42a2ba64a89b25b54a1c5f95306">m_collectorInfos</a>.insert(CollectorInfoMap::value_type(name, info));</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    }</div>
<div class="ttc" id="classdqm4hep_1_1online_1_1EventSource_html_ab4761b3a8abaa6219553bb7078d0fe78"><div class="ttname"><a href="classdqm4hep_1_1online_1_1EventSource.html#ab4761b3a8abaa6219553bb7078d0fe78">dqm4hep::online::EventSource::m_started</a></div><div class="ttdeci">bool m_started</div><div class="ttdoc">Whether the event source was started. </div><div class="ttdef"><b>Definition:</b> <a href="EventSource_8h_source.html#l00191">EventSource.h:191</a></div></div>
<div class="ttc" id="classdqm4hep_1_1online_1_1EventSource_html_ab677c42a2ba64a89b25b54a1c5f95306"><div class="ttname"><a href="classdqm4hep_1_1online_1_1EventSource.html#ab677c42a2ba64a89b25b54a1c5f95306">dqm4hep::online::EventSource::m_collectorInfos</a></div><div class="ttdeci">CollectorInfoMap m_collectorInfos</div><div class="ttdoc">The map of event collector infos. </div><div class="ttdef"><b>Definition:</b> <a href="EventSource_8h_source.html#l00195">EventSource.h:195</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a3748da8c9341e3df6a101d463a4eb797"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core::EventPtr dqm4hep::online::EventSource::createEvent </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="EventSource_8cc_source.html#l00223">223</a> of file <a class="el" href="EventSource_8cc_source.html">EventSource.cc</a>.</p>

<p>References <a class="el" href="EventSource_8h_source.html#l00194">m_eventStreamer</a>, and <a class="el" href="EventSource_8h_source.html#l00191">m_started</a>.</p>
<div class="fragment"><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    {</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;      <span class="keywordflow">if</span>(!<a class="code" href="classdqm4hep_1_1online_1_1EventSource.html#ab4761b3a8abaa6219553bb7078d0fe78">m_started</a>)</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;        <span class="keywordflow">throw</span> core::StatusCodeException(core::STATUS_CODE_NOT_INITIALIZED);</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;      </div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classdqm4hep_1_1online_1_1EventSource.html#acf86d725b4ed7be168ca780ac3efbe53">m_eventStreamer</a>-&gt;createEvent();</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    }</div>
<div class="ttc" id="classdqm4hep_1_1online_1_1EventSource_html_ab4761b3a8abaa6219553bb7078d0fe78"><div class="ttname"><a href="classdqm4hep_1_1online_1_1EventSource.html#ab4761b3a8abaa6219553bb7078d0fe78">dqm4hep::online::EventSource::m_started</a></div><div class="ttdeci">bool m_started</div><div class="ttdoc">Whether the event source was started. </div><div class="ttdef"><b>Definition:</b> <a href="EventSource_8h_source.html#l00191">EventSource.h:191</a></div></div>
<div class="ttc" id="classdqm4hep_1_1online_1_1EventSource_html_acf86d725b4ed7be168ca780ac3efbe53"><div class="ttname"><a href="classdqm4hep_1_1online_1_1EventSource.html#acf86d725b4ed7be168ca780ac3efbe53">dqm4hep::online::EventSource::m_eventStreamer</a></div><div class="ttdeci">EventStreamerPtr m_eventStreamer</div><div class="ttdoc">The event streamer pointer. </div><div class="ttdef"><b>Definition:</b> <a href="EventSource_8h_source.html#l00194">EventSource.h:194</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa72aa0d322337e7e9cdccea5992fe560"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void dqm4hep::online::EventSource::getSourceInfo </td>
          <td>(</td>
          <td class="paramtype">core::json &amp;&#160;</td>
          <td class="paramname"><em>info</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the source info (host info + source info) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">info</td><td>the json value to receive </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="EventSource_8cc_source.html#l00233">233</a> of file <a class="el" href="EventSource_8cc_source.html">EventSource.cc</a>.</p>

<p>References <a class="el" href="EventSource_8h_source.html#l00195">m_collectorInfos</a>, <a class="el" href="EventSource_8h_source.html#l00192">m_sourceName</a>, and <a class="el" href="EventSource_8h_source.html#l00193">m_streamerName</a>.</p>

<p>Referenced by <a class="el" href="EventSource_8cc_source.html#l00162">sendEvent()</a>, and <a class="el" href="EventSource_8cc_source.html#l00102">start()</a>.</p>
<div class="fragment"><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    {</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;      <span class="comment">// host info</span></div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;      core::StringMap hostInfo;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;      core::fillHostInfo(hostInfo);</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;                  </div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;      <span class="comment">// collectors</span></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;      core::json collectorsValue;</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;      <span class="keywordflow">for</span>(<span class="keyword">auto</span> colIter : <a class="code" href="classdqm4hep_1_1online_1_1EventSource.html#ab677c42a2ba64a89b25b54a1c5f95306">m_collectorInfos</a>)</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        collectorsValue.push_back(colIter.first);</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;      </div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;      info[<span class="stringliteral">&quot;source&quot;</span>] = <a class="code" href="classdqm4hep_1_1online_1_1EventSource.html#ae3a7d1e7404b31e1d63fac960632b62e">m_sourceName</a>;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;      info[<span class="stringliteral">&quot;host&quot;</span>] = hostInfo;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;      info[<span class="stringliteral">&quot;collectors&quot;</span>] = collectorsValue;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;      info[<span class="stringliteral">&quot;streamer&quot;</span>] = <a class="code" href="classdqm4hep_1_1online_1_1EventSource.html#a4c08eea4e0926c4657d405eec1385815">m_streamerName</a>;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    }</div>
<div class="ttc" id="classdqm4hep_1_1online_1_1EventSource_html_ab677c42a2ba64a89b25b54a1c5f95306"><div class="ttname"><a href="classdqm4hep_1_1online_1_1EventSource.html#ab677c42a2ba64a89b25b54a1c5f95306">dqm4hep::online::EventSource::m_collectorInfos</a></div><div class="ttdeci">CollectorInfoMap m_collectorInfos</div><div class="ttdoc">The map of event collector infos. </div><div class="ttdef"><b>Definition:</b> <a href="EventSource_8h_source.html#l00195">EventSource.h:195</a></div></div>
<div class="ttc" id="classdqm4hep_1_1online_1_1EventSource_html_a4c08eea4e0926c4657d405eec1385815"><div class="ttname"><a href="classdqm4hep_1_1online_1_1EventSource.html#a4c08eea4e0926c4657d405eec1385815">dqm4hep::online::EventSource::m_streamerName</a></div><div class="ttdeci">std::string m_streamerName</div><div class="ttdoc">The event streamer name (plugin name) </div><div class="ttdef"><b>Definition:</b> <a href="EventSource_8h_source.html#l00193">EventSource.h:193</a></div></div>
<div class="ttc" id="classdqm4hep_1_1online_1_1EventSource_html_ae3a7d1e7404b31e1d63fac960632b62e"><div class="ttname"><a href="classdqm4hep_1_1online_1_1EventSource.html#ae3a7d1e7404b31e1d63fac960632b62e">dqm4hep::online::EventSource::m_sourceName</a></div><div class="ttdeci">std::string m_sourceName</div><div class="ttdoc">The source name. </div><div class="ttdef"><b>Definition:</b> <a href="EventSource_8h_source.html#l00192">EventSource.h:192</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a06989071e1e556bfd4534a18b7277a76"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacedqm4hep_1_1online.html#aa39d9cd1ccd9f19b5502de15957a34da">EventSourcePtr</a> dqm4hep::online::EventSource::make_shared </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>sourceName</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Factory method to create a shared pointer of event source. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sourceName</td><td>the source name </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="EventSource_8cc_source.html#l00038">38</a> of file <a class="el" href="EventSource_8cc_source.html">EventSource.cc</a>.</p>

<p>References <a class="el" href="EventSource_8cc_source.html#l00045">EventSource()</a>.</p>
<div class="fragment"><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    {</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;      <span class="keywordflow">return</span> std::shared_ptr&lt;EventSource&gt;(<span class="keyword">new</span> <a class="code" href="classdqm4hep_1_1online_1_1EventSource.html#a63c228ca9cf0b22d09216e98be3b5400">EventSource</a>(<a class="code" href="classdqm4hep_1_1online_1_1EventSource.html#a0c7a4052807e6d719e41dbf37331cebb">sourceName</a>));</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    }</div>
<div class="ttc" id="classdqm4hep_1_1online_1_1EventSource_html_a63c228ca9cf0b22d09216e98be3b5400"><div class="ttname"><a href="classdqm4hep_1_1online_1_1EventSource.html#a63c228ca9cf0b22d09216e98be3b5400">dqm4hep::online::EventSource::EventSource</a></div><div class="ttdeci">EventSource(const std::string &amp;sourceName)</div><div class="ttdoc">Constructor. </div><div class="ttdef"><b>Definition:</b> <a href="EventSource_8cc_source.html#l00045">EventSource.cc:45</a></div></div>
<div class="ttc" id="classdqm4hep_1_1online_1_1EventSource_html_a0c7a4052807e6d719e41dbf37331cebb"><div class="ttname"><a href="classdqm4hep_1_1online_1_1EventSource.html#a0c7a4052807e6d719e41dbf37331cebb">dqm4hep::online::EventSource::sourceName</a></div><div class="ttdeci">const std::string &amp; sourceName() const </div><div class="ttdoc">Get the source name. </div><div class="ttdef"><b>Definition:</b> <a href="EventSource_8cc_source.html#l00061">EventSource.cc:61</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae7c992768da87cfd3557b4544a3bdd76"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool dqm4hep::online::EventSource::registerMe </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>collector</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const core::json &amp;&#160;</td>
          <td class="paramname"><em>info</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Register the event source to the specified collector. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">collector</td><td>the collector name to register to </td></tr>
    <tr><td class="paramname">info</td><td>the source info to send to the collector </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>bool whether the source was registered </dd></dl>

<p>Definition at line <a class="el" href="EventSource_8cc_source.html#l00252">252</a> of file <a class="el" href="EventSource_8cc_source.html">EventSource.cc</a>.</p>

<p>References <a class="el" href="EventSource_8h_source.html#l00196">m_client</a>.</p>

<p>Referenced by <a class="el" href="EventSource_8cc_source.html#l00162">sendEvent()</a>, and <a class="el" href="EventSource_8cc_source.html#l00102">start()</a>.</p>
<div class="fragment"><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    {</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;      std::string requestName = <span class="stringliteral">&quot;/dqm4hep/app/evtcol/&quot;</span> + collector + <span class="stringliteral">&quot;/register&quot;</span>;      </div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;      <span class="keywordtype">bool</span> returnValue(<span class="keyword">false</span>);</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;      net::Buffer requestBuffer;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;      <span class="keyword">auto</span> model = requestBuffer.createModel&lt;std::string&gt;();</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;      requestBuffer.setModel(model);</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;      model-&gt;move(std::move(info.dump()));</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;      </div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;      <a class="code" href="classdqm4hep_1_1online_1_1EventSource.html#a35e526f1e321736f786fb3be287017b4">m_client</a>.sendRequest(requestName, requestBuffer, [&amp;returnValue,&amp;collector](<span class="keyword">const</span> net::Buffer &amp;buffer){</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;        core::json response({});</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        </div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        <span class="keywordflow">if</span>(0 != buffer.size()) {</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;          response = core::json::parse(buffer.begin(), buffer.end());</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        }</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">bool</span> registered(response.value&lt;<span class="keywordtype">bool</span>&gt;(<span class="stringliteral">&quot;registered&quot;</span>, <span class="keyword">false</span>));</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        </div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        <span class="keywordflow">if</span>(!registered)</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;        {</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;          <span class="keyword">const</span> std::string message(response.value&lt;std::string&gt;(<span class="stringliteral">&quot;message&quot;</span>, <span class="stringliteral">&quot;The event collector is maybe not available or is down !&quot;</span>));</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;          dqm_warning( <span class="stringliteral">&quot;EventSource::registerMe(): Couldn&#39;t register source to collector &#39;{0}&#39;: {1}&quot;</span>, collector, message );</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;          returnValue = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        }</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;        {</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;          dqm_info( <span class="stringliteral">&quot;Event source registered to event collector &#39;{0}&#39; !&quot;</span>, collector );</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;          returnValue = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;        }</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;      });</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;      </div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;      <span class="keywordflow">if</span>(returnValue)</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;      {</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        dqm_info( <span class="stringliteral">&quot;Will notify server on exit&quot;</span> );</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        <a class="code" href="classdqm4hep_1_1online_1_1EventSource.html#a35e526f1e321736f786fb3be287017b4">m_client</a>.notifyServerOnExit(<span class="stringliteral">&quot;/dqm4hep/app/evtcol/&quot;</span> + collector);        </div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;      }</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;      </div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;      <span class="keywordflow">return</span> returnValue;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    }</div>
<div class="ttc" id="classdqm4hep_1_1online_1_1EventSource_html_a35e526f1e321736f786fb3be287017b4"><div class="ttname"><a href="classdqm4hep_1_1online_1_1EventSource.html#a35e526f1e321736f786fb3be287017b4">dqm4hep::online::EventSource::m_client</a></div><div class="ttdeci">net::Client m_client</div><div class="ttdoc">The networking client interface. </div><div class="ttdef"><b>Definition:</b> <a href="EventSource_8h_source.html#l00196">EventSource.h:196</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac36c3d98396cc0cb99031852b865f983"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dqm4hep::online::EventSource::sendEvent </td>
          <td>(</td>
          <td class="paramtype">const core::EventPtr &amp;&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send a single event to all registered collectors. </p>
<p>The event must be serializable by using the allocated streamer (see <a class="el" href="classdqm4hep_1_1online_1_1EventSource.html#a02cbf93b8d987c7e3a26d148a6e40d94" title="Set the event streamer name. ">setStreamerName()</a>).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">event</td><td>the event pointer to serialize and send </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="EventSource_8cc_source.html#l00137">137</a> of file <a class="el" href="EventSource_8cc_source.html">EventSource.cc</a>.</p>

<p>References <a class="el" href="EventSource_8h_source.html#l00195">m_collectorInfos</a>.</p>

<p>Referenced by <a class="el" href="EventSource_8cc_source.html#l00149">sendEvent()</a>.</p>
<div class="fragment"><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    {</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;      core::StringVector collectors;</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;      <span class="keywordflow">for</span>(<span class="keyword">auto</span> iter : <a class="code" href="classdqm4hep_1_1online_1_1EventSource.html#ab677c42a2ba64a89b25b54a1c5f95306">m_collectorInfos</a>)</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        collectors.push_back(iter.first);</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        </div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;      this-&gt;<a class="code" href="classdqm4hep_1_1online_1_1EventSource.html#ac36c3d98396cc0cb99031852b865f983">sendEvent</a>(collectors, event);</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    }</div>
<div class="ttc" id="classdqm4hep_1_1online_1_1EventSource_html_ab677c42a2ba64a89b25b54a1c5f95306"><div class="ttname"><a href="classdqm4hep_1_1online_1_1EventSource.html#ab677c42a2ba64a89b25b54a1c5f95306">dqm4hep::online::EventSource::m_collectorInfos</a></div><div class="ttdeci">CollectorInfoMap m_collectorInfos</div><div class="ttdoc">The map of event collector infos. </div><div class="ttdef"><b>Definition:</b> <a href="EventSource_8h_source.html#l00195">EventSource.h:195</a></div></div>
<div class="ttc" id="classdqm4hep_1_1online_1_1EventSource_html_ac36c3d98396cc0cb99031852b865f983"><div class="ttname"><a href="classdqm4hep_1_1online_1_1EventSource.html#ac36c3d98396cc0cb99031852b865f983">dqm4hep::online::EventSource::sendEvent</a></div><div class="ttdeci">void sendEvent(const core::EventPtr &amp;event)</div><div class="ttdoc">Send a single event to all registered collectors. </div><div class="ttdef"><b>Definition:</b> <a href="EventSource_8cc_source.html#l00137">EventSource.cc:137</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a8bd5f838fabd756b47cb9c7adae3f098"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dqm4hep::online::EventSource::sendEvent </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>collector</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const core::EventPtr &amp;&#160;</td>
          <td class="paramname"><em>event</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send a single event to a single collector. </p>
<p>The collector must have been registered with the function <a class="el" href="classdqm4hep_1_1online_1_1EventSource.html#a67ad7a32fea642021dff3aa87788979c" title="Add a new collector server to which events will be sent. ">addCollector()</a> before calling this function The event must be serializable by using the allocated streamer (see <a class="el" href="classdqm4hep_1_1online_1_1EventSource.html#a02cbf93b8d987c7e3a26d148a6e40d94" title="Set the event streamer name. ">setStreamerName()</a>).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">collector</td><td>the event collector to send </td></tr>
    <tr><td class="paramname">event</td><td>the event pointer to serialize and send </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="EventSource_8cc_source.html#l00149">149</a> of file <a class="el" href="EventSource_8cc_source.html">EventSource.cc</a>.</p>

<p>References <a class="el" href="EventSource_8h_source.html#l00195">m_collectorInfos</a>, and <a class="el" href="EventSource_8cc_source.html#l00137">sendEvent()</a>.</p>
<div class="fragment"><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    {</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;      <span class="keywordflow">if</span>(<a class="code" href="classdqm4hep_1_1online_1_1EventSource.html#ab677c42a2ba64a89b25b54a1c5f95306">m_collectorInfos</a>.end() == <a class="code" href="classdqm4hep_1_1online_1_1EventSource.html#ab677c42a2ba64a89b25b54a1c5f95306">m_collectorInfos</a>.find(collector))</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;      {</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        dqm_error( <span class="stringliteral">&quot;EventSource::sendEvent(col,evt): collector &#39;{0}&#39; not registered !&quot;</span>, collector );</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        <span class="keywordflow">throw</span> core::StatusCodeException(core::STATUS_CODE_NOT_FOUND);</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;      }</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;      </div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;      this-&gt;<a class="code" href="classdqm4hep_1_1online_1_1EventSource.html#ac36c3d98396cc0cb99031852b865f983">sendEvent</a>(core::StringVector({collector}), event);</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    }</div>
<div class="ttc" id="classdqm4hep_1_1online_1_1EventSource_html_ab677c42a2ba64a89b25b54a1c5f95306"><div class="ttname"><a href="classdqm4hep_1_1online_1_1EventSource.html#ab677c42a2ba64a89b25b54a1c5f95306">dqm4hep::online::EventSource::m_collectorInfos</a></div><div class="ttdeci">CollectorInfoMap m_collectorInfos</div><div class="ttdoc">The map of event collector infos. </div><div class="ttdef"><b>Definition:</b> <a href="EventSource_8h_source.html#l00195">EventSource.h:195</a></div></div>
<div class="ttc" id="classdqm4hep_1_1online_1_1EventSource_html_ac36c3d98396cc0cb99031852b865f983"><div class="ttname"><a href="classdqm4hep_1_1online_1_1EventSource.html#ac36c3d98396cc0cb99031852b865f983">dqm4hep::online::EventSource::sendEvent</a></div><div class="ttdeci">void sendEvent(const core::EventPtr &amp;event)</div><div class="ttdoc">Send a single event to all registered collectors. </div><div class="ttdef"><b>Definition:</b> <a href="EventSource_8cc_source.html#l00137">EventSource.cc:137</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a1515effbaebe87fe215a4dde56940a81"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void dqm4hep::online::EventSource::sendEvent </td>
          <td>(</td>
          <td class="paramtype">const core::StringVector &amp;&#160;</td>
          <td class="paramname"><em>collectors</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const core::EventPtr &amp;&#160;</td>
          <td class="paramname"><em>event</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Perform the actual event sending to the specified list of collectors. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">collectors</td><td>the list of collectors </td></tr>
    <tr><td class="paramname">event</td><td>[description] </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="EventSource_8cc_source.html#l00162">162</a> of file <a class="el" href="EventSource_8cc_source.html">EventSource.cc</a>.</p>

<p>References <a class="el" href="EventSource_8cc_source.html#l00233">getSourceInfo()</a>, <a class="el" href="EventSource_8h_source.html#l00197">m_bufferDevice</a>, <a class="el" href="EventSource_8h_source.html#l00196">m_client</a>, <a class="el" href="EventSource_8h_source.html#l00195">m_collectorInfos</a>, <a class="el" href="EventSource_8h_source.html#l00194">m_eventStreamer</a>, <a class="el" href="EventSource_8h_source.html#l00192">m_sourceName</a>, <a class="el" href="EventSource_8h_source.html#l00191">m_started</a>, and <a class="el" href="EventSource_8cc_source.html#l00252">registerMe()</a>.</p>
<div class="fragment"><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    {</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;      <span class="keywordflow">if</span>(!<a class="code" href="classdqm4hep_1_1online_1_1EventSource.html#ab4761b3a8abaa6219553bb7078d0fe78">m_started</a>)</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        <span class="keywordflow">throw</span> core::StatusCodeException(core::STATUS_CODE_NOT_INITIALIZED);</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        </div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;      <span class="keywordflow">if</span>(<span class="keyword">nullptr</span> == event)</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        <span class="keywordflow">throw</span> core::StatusCodeException(core::STATUS_CODE_INVALID_PTR);</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;      </div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;      (void)<a class="code" href="classdqm4hep_1_1online_1_1EventSource.html#a8998da547fe7fa59b6bc03fe77c44ec0">m_bufferDevice</a>-&gt;reset();</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;      </div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;      THROW_RESULT_IF(core::STATUS_CODE_SUCCESS, !=, <a class="code" href="classdqm4hep_1_1online_1_1EventSource.html#acf86d725b4ed7be168ca780ac3efbe53">m_eventStreamer</a>-&gt;write(event, <a class="code" href="classdqm4hep_1_1online_1_1EventSource.html#a8998da547fe7fa59b6bc03fe77c44ec0">m_bufferDevice</a>.get()));</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;      </div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;      core::json sourceInfo;</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;      net::Buffer collectBuffer;</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;      <span class="keyword">auto</span> model = collectBuffer.createModel();</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;      collectBuffer.setModel(model);</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;      model-&gt;handle(<a class="code" href="classdqm4hep_1_1online_1_1EventSource.html#a8998da547fe7fa59b6bc03fe77c44ec0">m_bufferDevice</a>-&gt;getBuffer(), <a class="code" href="classdqm4hep_1_1online_1_1EventSource.html#a8998da547fe7fa59b6bc03fe77c44ec0">m_bufferDevice</a>-&gt;getPosition());</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;      </div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;      <span class="comment">// send serialized event to all collectors </span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;      <span class="keywordflow">for</span>(<span class="keyword">auto</span> collector : collectors)</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;      {</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        <span class="keyword">auto</span> iter = <a class="code" href="classdqm4hep_1_1online_1_1EventSource.html#ab677c42a2ba64a89b25b54a1c5f95306">m_collectorInfos</a>.find(collector);</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        </div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="classdqm4hep_1_1online_1_1EventSource.html#ab677c42a2ba64a89b25b54a1c5f95306">m_collectorInfos</a>.end() == iter)</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        {</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;          dqm_error( <span class="stringliteral">&quot;EventSource::sendEvent(): Collector &#39;{0}&#39; not found... Something is wrong !!!&quot;</span>, collector );</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;          <span class="keywordflow">throw</span> core::StatusCodeException(core::STATUS_CODE_NOT_FOUND);</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        }</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        </div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        <span class="comment">// Is the event collector server actually running ?</span></div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        <span class="keywordflow">if</span>(!net::Server::isServerRunning(<span class="stringliteral">&quot;/dqm4hep/app/evtcol/&quot;</span> + iter-&gt;first))</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        {</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;          <span class="comment">// in case the server was stopped, we will need to send </span></div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;          <span class="comment">// back the source registration on wake up</span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;          iter-&gt;second.m_registered = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        }</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        </div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;        <span class="comment">// if not yet registered to the collector, do it</span></div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        <span class="keywordflow">if</span>(!iter-&gt;second.m_registered)</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;        {</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;          <span class="comment">// get it once</span></div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;          <span class="keywordflow">if</span>(sourceInfo.empty())</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;            this-&gt;<a class="code" href="classdqm4hep_1_1online_1_1EventSource.html#aa72aa0d322337e7e9cdccea5992fe560">getSourceInfo</a>(sourceInfo);</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;            </div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;          iter-&gt;second.m_registered = this-&gt;<a class="code" href="classdqm4hep_1_1online_1_1EventSource.html#ae7c992768da87cfd3557b4544a3bdd76">registerMe</a>(iter-&gt;first, sourceInfo);</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        }</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        </div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        <span class="keywordflow">if</span>(!iter-&gt;second.m_registered)</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;        {</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;          dqm_warning( <span class="stringliteral">&quot;EventSource::sendEvent(): Source &#39;{0}&#39; not registered yet to collector &#39;{1}&#39;. Skipping ...&quot;</span>, <a class="code" href="classdqm4hep_1_1online_1_1EventSource.html#ae3a7d1e7404b31e1d63fac960632b62e">m_sourceName</a>, collector );</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        }</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        </div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        std::string collectCommand = <span class="stringliteral">&quot;/dqm4hep/app/evtcol/&quot;</span> + collector + <span class="stringliteral">&quot;/collect&quot;</span>;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        <a class="code" href="classdqm4hep_1_1online_1_1EventSource.html#a35e526f1e321736f786fb3be287017b4">m_client</a>.sendCommand(collectCommand, collectBuffer);</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;      }  </div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    }</div>
<div class="ttc" id="classdqm4hep_1_1online_1_1EventSource_html_ae7c992768da87cfd3557b4544a3bdd76"><div class="ttname"><a href="classdqm4hep_1_1online_1_1EventSource.html#ae7c992768da87cfd3557b4544a3bdd76">dqm4hep::online::EventSource::registerMe</a></div><div class="ttdeci">bool registerMe(const std::string &amp;collector, const core::json &amp;info)</div><div class="ttdoc">Register the event source to the specified collector. </div><div class="ttdef"><b>Definition:</b> <a href="EventSource_8cc_source.html#l00252">EventSource.cc:252</a></div></div>
<div class="ttc" id="classdqm4hep_1_1online_1_1EventSource_html_ab4761b3a8abaa6219553bb7078d0fe78"><div class="ttname"><a href="classdqm4hep_1_1online_1_1EventSource.html#ab4761b3a8abaa6219553bb7078d0fe78">dqm4hep::online::EventSource::m_started</a></div><div class="ttdeci">bool m_started</div><div class="ttdoc">Whether the event source was started. </div><div class="ttdef"><b>Definition:</b> <a href="EventSource_8h_source.html#l00191">EventSource.h:191</a></div></div>
<div class="ttc" id="classdqm4hep_1_1online_1_1EventSource_html_ab677c42a2ba64a89b25b54a1c5f95306"><div class="ttname"><a href="classdqm4hep_1_1online_1_1EventSource.html#ab677c42a2ba64a89b25b54a1c5f95306">dqm4hep::online::EventSource::m_collectorInfos</a></div><div class="ttdeci">CollectorInfoMap m_collectorInfos</div><div class="ttdoc">The map of event collector infos. </div><div class="ttdef"><b>Definition:</b> <a href="EventSource_8h_source.html#l00195">EventSource.h:195</a></div></div>
<div class="ttc" id="classdqm4hep_1_1online_1_1EventSource_html_a35e526f1e321736f786fb3be287017b4"><div class="ttname"><a href="classdqm4hep_1_1online_1_1EventSource.html#a35e526f1e321736f786fb3be287017b4">dqm4hep::online::EventSource::m_client</a></div><div class="ttdeci">net::Client m_client</div><div class="ttdoc">The networking client interface. </div><div class="ttdef"><b>Definition:</b> <a href="EventSource_8h_source.html#l00196">EventSource.h:196</a></div></div>
<div class="ttc" id="classdqm4hep_1_1online_1_1EventSource_html_ae3a7d1e7404b31e1d63fac960632b62e"><div class="ttname"><a href="classdqm4hep_1_1online_1_1EventSource.html#ae3a7d1e7404b31e1d63fac960632b62e">dqm4hep::online::EventSource::m_sourceName</a></div><div class="ttdeci">std::string m_sourceName</div><div class="ttdoc">The source name. </div><div class="ttdef"><b>Definition:</b> <a href="EventSource_8h_source.html#l00192">EventSource.h:192</a></div></div>
<div class="ttc" id="classdqm4hep_1_1online_1_1EventSource_html_acf86d725b4ed7be168ca780ac3efbe53"><div class="ttname"><a href="classdqm4hep_1_1online_1_1EventSource.html#acf86d725b4ed7be168ca780ac3efbe53">dqm4hep::online::EventSource::m_eventStreamer</a></div><div class="ttdeci">EventStreamerPtr m_eventStreamer</div><div class="ttdoc">The event streamer pointer. </div><div class="ttdef"><b>Definition:</b> <a href="EventSource_8h_source.html#l00194">EventSource.h:194</a></div></div>
<div class="ttc" id="classdqm4hep_1_1online_1_1EventSource_html_aa72aa0d322337e7e9cdccea5992fe560"><div class="ttname"><a href="classdqm4hep_1_1online_1_1EventSource.html#aa72aa0d322337e7e9cdccea5992fe560">dqm4hep::online::EventSource::getSourceInfo</a></div><div class="ttdeci">void getSourceInfo(core::json &amp;info)</div><div class="ttdoc">Get the source info (host info + source info) </div><div class="ttdef"><b>Definition:</b> <a href="EventSource_8cc_source.html#l00233">EventSource.cc:233</a></div></div>
<div class="ttc" id="classdqm4hep_1_1online_1_1EventSource_html_a8998da547fe7fa59b6bc03fe77c44ec0"><div class="ttname"><a href="classdqm4hep_1_1online_1_1EventSource.html#a8998da547fe7fa59b6bc03fe77c44ec0">dqm4hep::online::EventSource::m_bufferDevice</a></div><div class="ttdeci">BufferDevicePtr m_bufferDevice</div><div class="ttdoc">The serialized event raw buffer (from xdrstream) </div><div class="ttdef"><b>Definition:</b> <a href="EventSource_8h_source.html#l00197">EventSource.h:197</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a02cbf93b8d987c7e3a26d148a6e40d94"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dqm4hep::online::EventSource::setStreamerName </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the event streamer name. </p>
<p>Must be set before calling <a class="el" href="classdqm4hep_1_1online_1_1EventSource.html#a25ff0612616b74305d8819d721df1a58" title="Start the event source. ">start()</a></p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>the event streamer name </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="EventSource_8cc_source.html#l00068">68</a> of file <a class="el" href="EventSource_8cc_source.html">EventSource.cc</a>.</p>

<p>References <a class="el" href="EventSource_8h_source.html#l00191">m_started</a>, and <a class="el" href="EventSource_8h_source.html#l00193">m_streamerName</a>.</p>
<div class="fragment"><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    {</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;      <span class="keywordflow">if</span>(<a class="code" href="classdqm4hep_1_1online_1_1EventSource.html#ab4761b3a8abaa6219553bb7078d0fe78">m_started</a>)</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;        <span class="keywordflow">throw</span> core::StatusCodeException(core::STATUS_CODE_NOT_ALLOWED);</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;        </div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;      <a class="code" href="classdqm4hep_1_1online_1_1EventSource.html#a4c08eea4e0926c4657d405eec1385815">m_streamerName</a> = name;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    }</div>
<div class="ttc" id="classdqm4hep_1_1online_1_1EventSource_html_ab4761b3a8abaa6219553bb7078d0fe78"><div class="ttname"><a href="classdqm4hep_1_1online_1_1EventSource.html#ab4761b3a8abaa6219553bb7078d0fe78">dqm4hep::online::EventSource::m_started</a></div><div class="ttdeci">bool m_started</div><div class="ttdoc">Whether the event source was started. </div><div class="ttdef"><b>Definition:</b> <a href="EventSource_8h_source.html#l00191">EventSource.h:191</a></div></div>
<div class="ttc" id="classdqm4hep_1_1online_1_1EventSource_html_a4c08eea4e0926c4657d405eec1385815"><div class="ttname"><a href="classdqm4hep_1_1online_1_1EventSource.html#a4c08eea4e0926c4657d405eec1385815">dqm4hep::online::EventSource::m_streamerName</a></div><div class="ttdeci">std::string m_streamerName</div><div class="ttdoc">The event streamer name (plugin name) </div><div class="ttdef"><b>Definition:</b> <a href="EventSource_8h_source.html#l00193">EventSource.h:193</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a0c7a4052807e6d719e41dbf37331cebb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const std::string &amp; dqm4hep::online::EventSource::sourceName </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the source name. </p>

<p>Definition at line <a class="el" href="EventSource_8cc_source.html#l00061">61</a> of file <a class="el" href="EventSource_8cc_source.html">EventSource.cc</a>.</p>

<p>References <a class="el" href="EventSource_8h_source.html#l00192">m_sourceName</a>.</p>
<div class="fragment"><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    {</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classdqm4hep_1_1online_1_1EventSource.html#ae3a7d1e7404b31e1d63fac960632b62e">m_sourceName</a>;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    }</div>
<div class="ttc" id="classdqm4hep_1_1online_1_1EventSource_html_ae3a7d1e7404b31e1d63fac960632b62e"><div class="ttname"><a href="classdqm4hep_1_1online_1_1EventSource.html#ae3a7d1e7404b31e1d63fac960632b62e">dqm4hep::online::EventSource::m_sourceName</a></div><div class="ttdeci">std::string m_sourceName</div><div class="ttdoc">The source name. </div><div class="ttdef"><b>Definition:</b> <a href="EventSource_8h_source.html#l00192">EventSource.h:192</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a25ff0612616b74305d8819d721df1a58"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dqm4hep::online::EventSource::start </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start the event source. </p>
<p>Setup raw buffers, event streamer (plugin) and register it to event collectors </p>

<p>Definition at line <a class="el" href="EventSource_8cc_source.html#l00102">102</a> of file <a class="el" href="EventSource_8cc_source.html">EventSource.cc</a>.</p>

<p>References <a class="el" href="EventSource_8cc_source.html#l00233">getSourceInfo()</a>, <a class="el" href="EventSource_8h_source.html#l00197">m_bufferDevice</a>, <a class="el" href="EventSource_8h_source.html#l00195">m_collectorInfos</a>, <a class="el" href="EventSource_8h_source.html#l00194">m_eventStreamer</a>, <a class="el" href="EventSource_8h_source.html#l00192">m_sourceName</a>, <a class="el" href="EventSource_8h_source.html#l00191">m_started</a>, <a class="el" href="EventSource_8h_source.html#l00193">m_streamerName</a>, and <a class="el" href="EventSource_8cc_source.html#l00252">registerMe()</a>.</p>
<div class="fragment"><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    {</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;      <span class="keywordflow">if</span>(<a class="code" href="classdqm4hep_1_1online_1_1EventSource.html#ab4761b3a8abaa6219553bb7078d0fe78">m_started</a>)</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        <span class="keywordflow">throw</span> core::StatusCodeException(core::STATUS_CODE_ALREADY_INITIALIZED);</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;      </div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;      <a class="code" href="classdqm4hep_1_1online_1_1EventSource.html#acf86d725b4ed7be168ca780ac3efbe53">m_eventStreamer</a> = core::PluginManager::instance()-&gt;create&lt;core::EventStreamer&gt;(<a class="code" href="classdqm4hep_1_1online_1_1EventSource.html#a4c08eea4e0926c4657d405eec1385815">m_streamerName</a>);</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;      </div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;      <span class="keywordflow">if</span>(!<a class="code" href="classdqm4hep_1_1online_1_1EventSource.html#acf86d725b4ed7be168ca780ac3efbe53">m_eventStreamer</a>)</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;      {</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        dqm_error( <span class="stringliteral">&quot;EventSource::start(): Event streamer &#39;{0}&#39; not found in available streamers. Couldn&#39;t initialize!&quot;</span>, <a class="code" href="classdqm4hep_1_1online_1_1EventSource.html#a4c08eea4e0926c4657d405eec1385815">m_streamerName</a> );</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;        <span class="keywordflow">throw</span> core::StatusCodeException(core::STATUS_CODE_NOT_FOUND);        </div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;      }</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;      </div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;      <span class="keywordflow">if</span>(<a class="code" href="classdqm4hep_1_1online_1_1EventSource.html#ab677c42a2ba64a89b25b54a1c5f95306">m_collectorInfos</a>.empty())</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;      {</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;        dqm_error( <span class="stringliteral">&quot;EventSource::start(): Event source &#39;{0}&#39; has no collector to send event. Couldn&#39;t initialize!&quot;</span>, <a class="code" href="classdqm4hep_1_1online_1_1EventSource.html#ae3a7d1e7404b31e1d63fac960632b62e">m_sourceName</a> );</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;        <span class="keywordflow">throw</span> core::StatusCodeException(core::STATUS_CODE_NOT_INITIALIZED);</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;      }</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;      </div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;      <a class="code" href="classdqm4hep_1_1online_1_1EventSource.html#a8998da547fe7fa59b6bc03fe77c44ec0">m_bufferDevice</a> = std::make_shared&lt;xdrstream::BufferDevice&gt;(2*1024*1024);</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;      </div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;      core::json sourceInfo;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;      this-&gt;<a class="code" href="classdqm4hep_1_1online_1_1EventSource.html#aa72aa0d322337e7e9cdccea5992fe560">getSourceInfo</a>(sourceInfo);</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;      </div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;      <span class="keywordflow">for</span>(<span class="keyword">auto</span> colIter : <a class="code" href="classdqm4hep_1_1online_1_1EventSource.html#ab677c42a2ba64a89b25b54a1c5f95306">m_collectorInfos</a>)</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;      {</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;        <span class="keywordtype">bool</span> registered = this-&gt;<a class="code" href="classdqm4hep_1_1online_1_1EventSource.html#ae7c992768da87cfd3557b4544a3bdd76">registerMe</a>(colIter.first, sourceInfo);</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        colIter.second.m_registered = registered;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;      }</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;      </div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;      <a class="code" href="classdqm4hep_1_1online_1_1EventSource.html#ab4761b3a8abaa6219553bb7078d0fe78">m_started</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    }</div>
<div class="ttc" id="classdqm4hep_1_1online_1_1EventSource_html_ae7c992768da87cfd3557b4544a3bdd76"><div class="ttname"><a href="classdqm4hep_1_1online_1_1EventSource.html#ae7c992768da87cfd3557b4544a3bdd76">dqm4hep::online::EventSource::registerMe</a></div><div class="ttdeci">bool registerMe(const std::string &amp;collector, const core::json &amp;info)</div><div class="ttdoc">Register the event source to the specified collector. </div><div class="ttdef"><b>Definition:</b> <a href="EventSource_8cc_source.html#l00252">EventSource.cc:252</a></div></div>
<div class="ttc" id="classdqm4hep_1_1online_1_1EventSource_html_ab4761b3a8abaa6219553bb7078d0fe78"><div class="ttname"><a href="classdqm4hep_1_1online_1_1EventSource.html#ab4761b3a8abaa6219553bb7078d0fe78">dqm4hep::online::EventSource::m_started</a></div><div class="ttdeci">bool m_started</div><div class="ttdoc">Whether the event source was started. </div><div class="ttdef"><b>Definition:</b> <a href="EventSource_8h_source.html#l00191">EventSource.h:191</a></div></div>
<div class="ttc" id="classdqm4hep_1_1online_1_1EventSource_html_ab677c42a2ba64a89b25b54a1c5f95306"><div class="ttname"><a href="classdqm4hep_1_1online_1_1EventSource.html#ab677c42a2ba64a89b25b54a1c5f95306">dqm4hep::online::EventSource::m_collectorInfos</a></div><div class="ttdeci">CollectorInfoMap m_collectorInfos</div><div class="ttdoc">The map of event collector infos. </div><div class="ttdef"><b>Definition:</b> <a href="EventSource_8h_source.html#l00195">EventSource.h:195</a></div></div>
<div class="ttc" id="classdqm4hep_1_1online_1_1EventSource_html_a4c08eea4e0926c4657d405eec1385815"><div class="ttname"><a href="classdqm4hep_1_1online_1_1EventSource.html#a4c08eea4e0926c4657d405eec1385815">dqm4hep::online::EventSource::m_streamerName</a></div><div class="ttdeci">std::string m_streamerName</div><div class="ttdoc">The event streamer name (plugin name) </div><div class="ttdef"><b>Definition:</b> <a href="EventSource_8h_source.html#l00193">EventSource.h:193</a></div></div>
<div class="ttc" id="classdqm4hep_1_1online_1_1EventSource_html_ae3a7d1e7404b31e1d63fac960632b62e"><div class="ttname"><a href="classdqm4hep_1_1online_1_1EventSource.html#ae3a7d1e7404b31e1d63fac960632b62e">dqm4hep::online::EventSource::m_sourceName</a></div><div class="ttdeci">std::string m_sourceName</div><div class="ttdoc">The source name. </div><div class="ttdef"><b>Definition:</b> <a href="EventSource_8h_source.html#l00192">EventSource.h:192</a></div></div>
<div class="ttc" id="classdqm4hep_1_1online_1_1EventSource_html_acf86d725b4ed7be168ca780ac3efbe53"><div class="ttname"><a href="classdqm4hep_1_1online_1_1EventSource.html#acf86d725b4ed7be168ca780ac3efbe53">dqm4hep::online::EventSource::m_eventStreamer</a></div><div class="ttdeci">EventStreamerPtr m_eventStreamer</div><div class="ttdoc">The event streamer pointer. </div><div class="ttdef"><b>Definition:</b> <a href="EventSource_8h_source.html#l00194">EventSource.h:194</a></div></div>
<div class="ttc" id="classdqm4hep_1_1online_1_1EventSource_html_aa72aa0d322337e7e9cdccea5992fe560"><div class="ttname"><a href="classdqm4hep_1_1online_1_1EventSource.html#aa72aa0d322337e7e9cdccea5992fe560">dqm4hep::online::EventSource::getSourceInfo</a></div><div class="ttdeci">void getSourceInfo(core::json &amp;info)</div><div class="ttdoc">Get the source info (host info + source info) </div><div class="ttdef"><b>Definition:</b> <a href="EventSource_8cc_source.html#l00233">EventSource.cc:233</a></div></div>
<div class="ttc" id="classdqm4hep_1_1online_1_1EventSource_html_a8998da547fe7fa59b6bc03fe77c44ec0"><div class="ttname"><a href="classdqm4hep_1_1online_1_1EventSource.html#a8998da547fe7fa59b6bc03fe77c44ec0">dqm4hep::online::EventSource::m_bufferDevice</a></div><div class="ttdeci">BufferDevicePtr m_bufferDevice</div><div class="ttdoc">The serialized event raw buffer (from xdrstream) </div><div class="ttdef"><b>Definition:</b> <a href="EventSource_8h_source.html#l00197">EventSource.h:197</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a719c2ed712f1df02d7bf068aaaf80487"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const std::string &amp; dqm4hep::online::EventSource::streamerName </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the event streamer name. </p>

<p>Definition at line <a class="el" href="EventSource_8cc_source.html#l00078">78</a> of file <a class="el" href="EventSource_8cc_source.html">EventSource.cc</a>.</p>

<p>References <a class="el" href="EventSource_8h_source.html#l00193">m_streamerName</a>.</p>
<div class="fragment"><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    {</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classdqm4hep_1_1online_1_1EventSource.html#a4c08eea4e0926c4657d405eec1385815">m_streamerName</a>;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    }</div>
<div class="ttc" id="classdqm4hep_1_1online_1_1EventSource_html_a4c08eea4e0926c4657d405eec1385815"><div class="ttname"><a href="classdqm4hep_1_1online_1_1EventSource.html#a4c08eea4e0926c4657d405eec1385815">dqm4hep::online::EventSource::m_streamerName</a></div><div class="ttdeci">std::string m_streamerName</div><div class="ttdoc">The event streamer name (plugin name) </div><div class="ttdef"><b>Definition:</b> <a href="EventSource_8h_source.html#l00193">EventSource.h:193</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a2afa8b71476aadbd125e68f0fc3aa7fa"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void dqm4hep::online::EventSource::unregisterMe </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>collector</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Un-register the event source from the specified collector. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">collector</td><td>the collector name to un-register to </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="EventSource_8cc_source.html#l00294">294</a> of file <a class="el" href="EventSource_8cc_source.html">EventSource.cc</a>.</p>

<p>References <a class="el" href="EventSource_8h_source.html#l00196">m_client</a>.</p>

<p>Referenced by <a class="el" href="EventSource_8cc_source.html#l00053">~EventSource()</a>.</p>
<div class="fragment"><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    {</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;      std::string commandName = <span class="stringliteral">&quot;/dqm4hep/app/evtcol/&quot;</span> + collector + <span class="stringliteral">&quot;/unregister&quot;</span>;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;      <a class="code" href="classdqm4hep_1_1online_1_1EventSource.html#a35e526f1e321736f786fb3be287017b4">m_client</a>.sendCommand(commandName, std::string(<span class="stringliteral">&quot;&quot;</span>));</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    }</div>
<div class="ttc" id="classdqm4hep_1_1online_1_1EventSource_html_a35e526f1e321736f786fb3be287017b4"><div class="ttname"><a href="classdqm4hep_1_1online_1_1EventSource.html#a35e526f1e321736f786fb3be287017b4">dqm4hep::online::EventSource::m_client</a></div><div class="ttdeci">net::Client m_client</div><div class="ttdoc">The networking client interface. </div><div class="ttdef"><b>Definition:</b> <a href="EventSource_8h_source.html#l00196">EventSource.h:196</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a8998da547fe7fa59b6bc03fe77c44ec0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classdqm4hep_1_1online_1_1EventSource.html#aa38eebd6abd63064deeb583b54adc1c4">BufferDevicePtr</a> dqm4hep::online::EventSource::m_bufferDevice = {nullptr}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The serialized event raw buffer (from xdrstream) </p>

<p>Definition at line <a class="el" href="EventSource_8h_source.html#l00197">197</a> of file <a class="el" href="EventSource_8h_source.html">EventSource.h</a>.</p>

<p>Referenced by <a class="el" href="EventSource_8cc_source.html#l00162">sendEvent()</a>, and <a class="el" href="EventSource_8cc_source.html#l00102">start()</a>.</p>

</div>
</div>
<a class="anchor" id="a35e526f1e321736f786fb3be287017b4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">net::Client dqm4hep::online::EventSource::m_client</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The networking client interface. </p>

<p>Definition at line <a class="el" href="EventSource_8h_source.html#l00196">196</a> of file <a class="el" href="EventSource_8h_source.html">EventSource.h</a>.</p>

<p>Referenced by <a class="el" href="EventSource_8cc_source.html#l00252">registerMe()</a>, <a class="el" href="EventSource_8cc_source.html#l00162">sendEvent()</a>, and <a class="el" href="EventSource_8cc_source.html#l00294">unregisterMe()</a>.</p>

</div>
</div>
<a class="anchor" id="ab677c42a2ba64a89b25b54a1c5f95306"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classdqm4hep_1_1online_1_1EventSource.html#a24dd92e30ac741f8aeb2466f1d86aad8">CollectorInfoMap</a> dqm4hep::online::EventSource::m_collectorInfos = {}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The map of event collector infos. </p>

<p>Definition at line <a class="el" href="EventSource_8h_source.html#l00195">195</a> of file <a class="el" href="EventSource_8h_source.html">EventSource.h</a>.</p>

<p>Referenced by <a class="el" href="EventSource_8cc_source.html#l00085">addCollector()</a>, <a class="el" href="EventSource_8cc_source.html#l00233">getSourceInfo()</a>, <a class="el" href="EventSource_8cc_source.html#l00137">sendEvent()</a>, <a class="el" href="EventSource_8cc_source.html#l00102">start()</a>, and <a class="el" href="EventSource_8cc_source.html#l00053">~EventSource()</a>.</p>

</div>
</div>
<a class="anchor" id="acf86d725b4ed7be168ca780ac3efbe53"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classdqm4hep_1_1online_1_1EventSource.html#ae275cccf4a6daaf46ad8d87b15f22f2b">EventStreamerPtr</a> dqm4hep::online::EventSource::m_eventStreamer = {nullptr}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The event streamer pointer. </p>

<p>Definition at line <a class="el" href="EventSource_8h_source.html#l00194">194</a> of file <a class="el" href="EventSource_8h_source.html">EventSource.h</a>.</p>

<p>Referenced by <a class="el" href="EventSource_8cc_source.html#l00223">createEvent()</a>, <a class="el" href="EventSource_8cc_source.html#l00162">sendEvent()</a>, and <a class="el" href="EventSource_8cc_source.html#l00102">start()</a>.</p>

</div>
</div>
<a class="anchor" id="ae3a7d1e7404b31e1d63fac960632b62e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string dqm4hep::online::EventSource::m_sourceName = &quot;&quot;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The source name. </p>

<p>Definition at line <a class="el" href="EventSource_8h_source.html#l00192">192</a> of file <a class="el" href="EventSource_8h_source.html">EventSource.h</a>.</p>

<p>Referenced by <a class="el" href="EventSource_8cc_source.html#l00233">getSourceInfo()</a>, <a class="el" href="EventSource_8cc_source.html#l00162">sendEvent()</a>, <a class="el" href="EventSource_8cc_source.html#l00061">sourceName()</a>, and <a class="el" href="EventSource_8cc_source.html#l00102">start()</a>.</p>

</div>
</div>
<a class="anchor" id="ab4761b3a8abaa6219553bb7078d0fe78"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool dqm4hep::online::EventSource::m_started = false</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Whether the event source was started. </p>

<p>Definition at line <a class="el" href="EventSource_8h_source.html#l00191">191</a> of file <a class="el" href="EventSource_8h_source.html">EventSource.h</a>.</p>

<p>Referenced by <a class="el" href="EventSource_8cc_source.html#l00085">addCollector()</a>, <a class="el" href="EventSource_8cc_source.html#l00223">createEvent()</a>, <a class="el" href="EventSource_8cc_source.html#l00162">sendEvent()</a>, <a class="el" href="EventSource_8cc_source.html#l00068">setStreamerName()</a>, and <a class="el" href="EventSource_8cc_source.html#l00102">start()</a>.</p>

</div>
</div>
<a class="anchor" id="a4c08eea4e0926c4657d405eec1385815"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string dqm4hep::online::EventSource::m_streamerName = &quot;&quot;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The event streamer name (plugin name) </p>

<p>Definition at line <a class="el" href="EventSource_8h_source.html#l00193">193</a> of file <a class="el" href="EventSource_8h_source.html">EventSource.h</a>.</p>

<p>Referenced by <a class="el" href="EventSource_8cc_source.html#l00233">getSourceInfo()</a>, <a class="el" href="EventSource_8cc_source.html#l00068">setStreamerName()</a>, <a class="el" href="EventSource_8cc_source.html#l00102">start()</a>, and <a class="el" href="EventSource_8cc_source.html#l00078">streamerName()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="EventSource_8h_source.html">EventSource.h</a></li>
<li><a class="el" href="EventSource_8cc_source.html">EventSource.cc</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Apr 11 2018 11:59:08 for DQMOnline by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
