<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>DQMCore: dqm4hep::core::Archiver Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">DQMCore
   &#160;<span id="projectnumber">2.3.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacedqm4hep.html">dqm4hep</a></li><li class="navelem"><a class="el" href="namespacedqm4hep_1_1core.html">core</a></li><li class="navelem"><a class="el" href="classdqm4hep_1_1core_1_1Archiver.html">Archiver</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-static-methods">Static Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classdqm4hep_1_1core_1_1Archiver-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">dqm4hep::core::Archiver Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><a class="el" href="classdqm4hep_1_1core_1_1Archiver.html" title="Archiver class. ">Archiver</a> class.  
 <a href="classdqm4hep_1_1core_1_1Archiver.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="Archiver_8h_source.html">Archiver.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:adc8ebdb7923ca32c7e3327f76d5e3ec5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdqm4hep_1_1core_1_1Archiver.html#adc8ebdb7923ca32c7e3327f76d5e3ec5">Archiver</a> ()=default</td></tr>
<tr class="separator:adc8ebdb7923ca32c7e3327f76d5e3ec5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba90140fe1cdd6df73fbdcb7910a068e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdqm4hep_1_1core_1_1Archiver.html#aba90140fe1cdd6df73fbdcb7910a068e">Archiver</a> (const <a class="el" href="classdqm4hep_1_1core_1_1Archiver.html">Archiver</a> &amp;)=delete</td></tr>
<tr class="separator:aba90140fe1cdd6df73fbdcb7910a068e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0cb3c36bbc2b8fcc65d3f49e0c6364b6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classdqm4hep_1_1core_1_1Archiver.html">Archiver</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdqm4hep_1_1core_1_1Archiver.html#a0cb3c36bbc2b8fcc65d3f49e0c6364b6">operator=</a> (const <a class="el" href="classdqm4hep_1_1core_1_1Archiver.html">Archiver</a> &amp;)=delete</td></tr>
<tr class="separator:a0cb3c36bbc2b8fcc65d3f49e0c6364b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abfc78462953d34340430305eac901e14"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdqm4hep_1_1core_1_1Archiver.html#abfc78462953d34340430305eac901e14">Archiver</a> (const std::string &amp;fname, const std::string &amp;opMode=&quot;RECREATE&quot;, bool overwrite=false)</td></tr>
<tr class="memdesc:abfc78462953d34340430305eac901e14"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor See <a class="el" href="classdqm4hep_1_1core_1_1Archiver.html#aa4e4d232c02c72867b7c7c968350ab7f" title="Open a new archive. ">open()</a> for argument explanation.  <a href="#abfc78462953d34340430305eac901e14">More...</a><br/></td></tr>
<tr class="separator:abfc78462953d34340430305eac901e14"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5fc9e933b6b835d9f4031cfaddee116c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdqm4hep_1_1core_1_1Archiver.html#a5fc9e933b6b835d9f4031cfaddee116c">~Archiver</a> ()</td></tr>
<tr class="memdesc:a5fc9e933b6b835d9f4031cfaddee116c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor.  <a href="#a5fc9e933b6b835d9f4031cfaddee116c">More...</a><br/></td></tr>
<tr class="separator:a5fc9e933b6b835d9f4031cfaddee116c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4e4d232c02c72867b7c7c968350ab7f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacedqm4hep_1_1core.html#af0b0a4c04ab15f7bb082f3b9943a6fbd">StatusCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdqm4hep_1_1core_1_1Archiver.html#aa4e4d232c02c72867b7c7c968350ab7f">open</a> (const std::string &amp;fname, const std::string &amp;opMode=&quot;RECREATE&quot;, bool overwrite=true)</td></tr>
<tr class="memdesc:aa4e4d232c02c72867b7c7c968350ab7f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Open a new archive.  <a href="#aa4e4d232c02c72867b7c7c968350ab7f">More...</a><br/></td></tr>
<tr class="separator:aa4e4d232c02c72867b7c7c968350ab7f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a860bfab6fb5561a717c8d2329fc158f7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacedqm4hep_1_1core.html#af0b0a4c04ab15f7bb082f3b9943a6fbd">StatusCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdqm4hep_1_1core_1_1Archiver.html#a860bfab6fb5561a717c8d2329fc158f7">close</a> ()</td></tr>
<tr class="memdesc:a860bfab6fb5561a717c8d2329fc158f7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Close the current archive.  <a href="#a860bfab6fb5561a717c8d2329fc158f7">More...</a><br/></td></tr>
<tr class="separator:a860bfab6fb5561a717c8d2329fc158f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46bb3b684cd1c0941e41c1d160bf49af"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacedqm4hep_1_1core.html#af0b0a4c04ab15f7bb082f3b9943a6fbd">StatusCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdqm4hep_1_1core_1_1Archiver.html#a46bb3b684cd1c0941e41c1d160bf49af">archive</a> (const <a class="el" href="classdqm4hep_1_1core_1_1Storage.html">Storage</a>&lt; <a class="el" href="classdqm4hep_1_1core_1_1MonitorElement.html">MonitorElement</a> &gt; &amp;storage, const std::string &amp;dirName=&quot;&quot;)</td></tr>
<tr class="memdesc:a46bb3b684cd1c0941e41c1d160bf49af"><td class="mdescLeft">&#160;</td><td class="mdescRight">Archive the monitor element storage in the ROOT file.  <a href="#a46bb3b684cd1c0941e41c1d160bf49af">More...</a><br/></td></tr>
<tr class="separator:a46bb3b684cd1c0941e41c1d160bf49af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae87f65d5f24a01637bff93e155719e11"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacedqm4hep_1_1core.html#af0b0a4c04ab15f7bb082f3b9943a6fbd">StatusCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdqm4hep_1_1core_1_1Archiver.html#ae87f65d5f24a01637bff93e155719e11">archiveWithReferences</a> (const <a class="el" href="classdqm4hep_1_1core_1_1Storage.html">Storage</a>&lt; <a class="el" href="classdqm4hep_1_1core_1_1MonitorElement.html">MonitorElement</a> &gt; &amp;storage, const std::string &amp;dirName=&quot;&quot;, const std::string &amp;refSuffix=&quot;_ref&quot;)</td></tr>
<tr class="memdesc:ae87f65d5f24a01637bff93e155719e11"><td class="mdescLeft">&#160;</td><td class="mdescRight">Archive the monitor element storage in the ROOT file.  <a href="#ae87f65d5f24a01637bff93e155719e11">More...</a><br/></td></tr>
<tr class="separator:ae87f65d5f24a01637bff93e155719e11"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf5702da30da3913de3fb38535f1aa57"><td class="memItemLeft" align="right" valign="top">const std::string &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdqm4hep_1_1core_1_1Archiver.html#aaf5702da30da3913de3fb38535f1aa57">fileName</a> () const </td></tr>
<tr class="memdesc:aaf5702da30da3913de3fb38535f1aa57"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the file name.  <a href="#aaf5702da30da3913de3fb38535f1aa57">More...</a><br/></td></tr>
<tr class="separator:aaf5702da30da3913de3fb38535f1aa57"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a822bb8b77f5f8327eb355c7000c63cbe"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdqm4hep_1_1core_1_1Archiver.html#a822bb8b77f5f8327eb355c7000c63cbe">isOpened</a> () const </td></tr>
<tr class="memdesc:a822bb8b77f5f8327eb355c7000c63cbe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Whether the archive is opened.  <a href="#a822bb8b77f5f8327eb355c7000c63cbe">More...</a><br/></td></tr>
<tr class="separator:a822bb8b77f5f8327eb355c7000c63cbe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd092a39c60942ccbdf9a274b167cee3"><td class="memItemLeft" align="right" valign="top">const std::string &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdqm4hep_1_1core_1_1Archiver.html#abd092a39c60942ccbdf9a274b167cee3">openingMode</a> () const </td></tr>
<tr class="memdesc:abd092a39c60942ccbdf9a274b167cee3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the opening mode of this archive.  <a href="#abd092a39c60942ccbdf9a274b167cee3">More...</a><br/></td></tr>
<tr class="separator:abd092a39c60942ccbdf9a274b167cee3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a041ab405ea58b9d483c4cc8b3faeb5e6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacedqm4hep_1_1core.html#af0b0a4c04ab15f7bb082f3b9943a6fbd">StatusCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdqm4hep_1_1core_1_1Archiver.html#a041ab405ea58b9d483c4cc8b3faeb5e6">prepareForAchiving</a> (const std::string &amp;dirName, TDirectory *&amp;directory)</td></tr>
<tr class="memdesc:a041ab405ea58b9d483c4cc8b3faeb5e6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prepare the ROOT file for archiving.  <a href="#a041ab405ea58b9d483c4cc8b3faeb5e6">More...</a><br/></td></tr>
<tr class="separator:a041ab405ea58b9d483c4cc8b3faeb5e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-static-methods"></a>
Static Private Member Functions</h2></td></tr>
<tr class="memitem:a042c3f10ac309a93155a5d67e2c335f6"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="namespacedqm4hep_1_1core.html#af0b0a4c04ab15f7bb082f3b9943a6fbd">StatusCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdqm4hep_1_1core_1_1Archiver.html#a042c3f10ac309a93155a5d67e2c335f6">recursiveWrite</a> (<a class="el" href="namespacedqm4hep_1_1core.html#a66e5fe06f35aace0c904c8a621cc4e00">MonitorElementDir</a> directory, TDirectory *rootDirectory, const std::string &amp;refSuffix=&quot;&quot;)</td></tr>
<tr class="memdesc:a042c3f10ac309a93155a5d67e2c335f6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fill recursively the TDirectory with the <a class="el" href="classdqm4hep_1_1core_1_1Directory.html" title="Directory class. ">Directory</a>.  <a href="#a042c3f10ac309a93155a5d67e2c335f6">More...</a><br/></td></tr>
<tr class="separator:a042c3f10ac309a93155a5d67e2c335f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace67cbe514ea576c5b13745149ec61af"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="namespacedqm4hep_1_1core.html#af0b0a4c04ab15f7bb082f3b9943a6fbd">StatusCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdqm4hep_1_1core_1_1Archiver.html#ace67cbe514ea576c5b13745149ec61af">writeMonitorElements</a> (<a class="el" href="namespacedqm4hep_1_1core.html#a66e5fe06f35aace0c904c8a621cc4e00">MonitorElementDir</a> directory, TDirectory *rootDirectory, const std::string &amp;refSuffix=&quot;&quot;)</td></tr>
<tr class="memdesc:ace67cbe514ea576c5b13745149ec61af"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write the monitor elements contained in the <a class="el" href="classdqm4hep_1_1core_1_1Directory.html" title="Directory class. ">Directory</a> in the TDirectory.  <a href="#ace67cbe514ea576c5b13745149ec61af">More...</a><br/></td></tr>
<tr class="separator:ace67cbe514ea576c5b13745149ec61af"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:acce8d6d20b5a171d7251c0fd1859505d"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdqm4hep_1_1core_1_1Archiver.html#acce8d6d20b5a171d7251c0fd1859505d">m_fileName</a> = {&quot;&quot;}</td></tr>
<tr class="memdesc:acce8d6d20b5a171d7251c0fd1859505d"><td class="mdescLeft">&#160;</td><td class="mdescRight">The archive file name.  <a href="#acce8d6d20b5a171d7251c0fd1859505d">More...</a><br/></td></tr>
<tr class="separator:acce8d6d20b5a171d7251c0fd1859505d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acaea9288891f6aba89e9025c7267b3b8"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdqm4hep_1_1core_1_1Archiver.html#acaea9288891f6aba89e9025c7267b3b8">m_openingMode</a> = {&quot;RECREATE&quot;}</td></tr>
<tr class="memdesc:acaea9288891f6aba89e9025c7267b3b8"><td class="mdescLeft">&#160;</td><td class="mdescRight">The root file opening mode.  <a href="#acaea9288891f6aba89e9025c7267b3b8">More...</a><br/></td></tr>
<tr class="separator:acaea9288891f6aba89e9025c7267b3b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9adffe73065c778afc5da4437a2d002e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdqm4hep_1_1core_1_1Archiver.html#a9adffe73065c778afc5da4437a2d002e">m_isOpened</a> = {false}</td></tr>
<tr class="memdesc:a9adffe73065c778afc5da4437a2d002e"><td class="mdescLeft">&#160;</td><td class="mdescRight">The actual archive implementation (root file)  <a href="#a9adffe73065c778afc5da4437a2d002e">More...</a><br/></td></tr>
<tr class="separator:a9adffe73065c778afc5da4437a2d002e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a597c9b43db92ba53af53e363a3ea839b"><td class="memItemLeft" align="right" valign="top">std::unique_ptr&lt; TFile &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdqm4hep_1_1core_1_1Archiver.html#a597c9b43db92ba53af53e363a3ea839b">m_file</a> = {nullptr}</td></tr>
<tr class="separator:a597c9b43db92ba53af53e363a3ea839b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p><a class="el" href="classdqm4hep_1_1core_1_1Archiver.html" title="Archiver class. ">Archiver</a> class. </p>

<p>Definition at line <a class="el" href="Archiver_8h_source.html#l00050">50</a> of file <a class="el" href="Archiver_8h_source.html">Archiver.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="adc8ebdb7923ca32c7e3327f76d5e3ec5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">dqm4hep::core::Archiver::Archiver </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">default</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="aba90140fe1cdd6df73fbdcb7910a068e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">dqm4hep::core::Archiver::Archiver </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classdqm4hep_1_1core_1_1Archiver.html">Archiver</a> &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="abfc78462953d34340430305eac901e14"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">dqm4hep::core::Archiver::Archiver </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>fname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>opMode</em> = <code>&quot;RECREATE&quot;</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>overwrite</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructor See <a class="el" href="classdqm4hep_1_1core_1_1Archiver.html#aa4e4d232c02c72867b7c7c968350ab7f" title="Open a new archive. ">open()</a> for argument explanation. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">archiveFileName</td><td>the root file name </td></tr>
    <tr><td class="paramname">opMode</td><td>the ROOT file opening mode </td></tr>
    <tr><td class="paramname">overwrite</td><td>whether to allow to overwrite previous archive </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="Archiver_8cc_source.html#l00044">44</a> of file <a class="el" href="Archiver_8cc_source.html">Archiver.cc</a>.</p>

<p>References <a class="el" href="Archiver_8cc_source.html#l00057">open()</a>, and <a class="el" href="StatusCodes_8h_source.html#l00065">THROW_RESULT_IF</a>.</p>
<div class="fragment"><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;                                                                                                {</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;      <a class="code" href="StatusCodes_8h.html#ab49c8013f48bd677d0e5e39cb506b8f9">THROW_RESULT_IF</a>(STATUS_CODE_SUCCESS, !=, this-&gt;<a class="code" href="classdqm4hep_1_1core_1_1Archiver.html#aa4e4d232c02c72867b7c7c968350ab7f">open</a>(archiveFileName, opMode, overwrite));</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    }</div>
<div class="ttc" id="StatusCodes_8h_html_ab49c8013f48bd677d0e5e39cb506b8f9"><div class="ttname"><a href="StatusCodes_8h.html#ab49c8013f48bd677d0e5e39cb506b8f9">THROW_RESULT_IF</a></div><div class="ttdeci">#define THROW_RESULT_IF(StatusCode1, Operator, Command)</div><div class="ttdef"><b>Definition:</b> <a href="StatusCodes_8h_source.html#l00065">StatusCodes.h:65</a></div></div>
<div class="ttc" id="classdqm4hep_1_1core_1_1Archiver_html_aa4e4d232c02c72867b7c7c968350ab7f"><div class="ttname"><a href="classdqm4hep_1_1core_1_1Archiver.html#aa4e4d232c02c72867b7c7c968350ab7f">dqm4hep::core::Archiver::open</a></div><div class="ttdeci">StatusCode open(const std::string &amp;fname, const std::string &amp;opMode=&quot;RECREATE&quot;, bool overwrite=true)</div><div class="ttdoc">Open a new archive. </div><div class="ttdef"><b>Definition:</b> <a href="Archiver_8cc_source.html#l00057">Archiver.cc:57</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a5fc9e933b6b835d9f4031cfaddee116c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">dqm4hep::core::Archiver::~Archiver </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Destructor. </p>

<p>Definition at line <a class="el" href="Archiver_8cc_source.html#l00050">50</a> of file <a class="el" href="Archiver_8cc_source.html">Archiver.cc</a>.</p>

<p>References <a class="el" href="Archiver_8cc_source.html#l00099">close()</a>, and <a class="el" href="Archiver_8cc_source.html#l00140">isOpened()</a>.</p>
<div class="fragment"><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;                        {</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classdqm4hep_1_1core_1_1Archiver.html#a822bb8b77f5f8327eb355c7000c63cbe">isOpened</a>())</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;        <a class="code" href="classdqm4hep_1_1core_1_1Archiver.html#a860bfab6fb5561a717c8d2329fc158f7">close</a>();</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    }</div>
<div class="ttc" id="classdqm4hep_1_1core_1_1Archiver_html_a860bfab6fb5561a717c8d2329fc158f7"><div class="ttname"><a href="classdqm4hep_1_1core_1_1Archiver.html#a860bfab6fb5561a717c8d2329fc158f7">dqm4hep::core::Archiver::close</a></div><div class="ttdeci">StatusCode close()</div><div class="ttdoc">Close the current archive. </div><div class="ttdef"><b>Definition:</b> <a href="Archiver_8cc_source.html#l00099">Archiver.cc:99</a></div></div>
<div class="ttc" id="classdqm4hep_1_1core_1_1Archiver_html_a822bb8b77f5f8327eb355c7000c63cbe"><div class="ttname"><a href="classdqm4hep_1_1core_1_1Archiver.html#a822bb8b77f5f8327eb355c7000c63cbe">dqm4hep::core::Archiver::isOpened</a></div><div class="ttdeci">bool isOpened() const </div><div class="ttdoc">Whether the archive is opened. </div><div class="ttdef"><b>Definition:</b> <a href="Archiver_8cc_source.html#l00140">Archiver.cc:140</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a46bb3b684cd1c0941e41c1d160bf49af"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacedqm4hep_1_1core.html#af0b0a4c04ab15f7bb082f3b9943a6fbd">StatusCode</a> dqm4hep::core::Archiver::archive </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classdqm4hep_1_1core_1_1Storage.html">Storage</a>&lt; <a class="el" href="classdqm4hep_1_1core_1_1MonitorElement.html">MonitorElement</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>storage</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>dirName</em> = <code>&quot;&quot;</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Archive the monitor element storage in the ROOT file. </p>
<p>The result can be written in a specific directory using the dirName argument. By default, the content is written directly in the top-level directory</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">storage</td><td>the storage to archive </td></tr>
    <tr><td class="paramname">dirName</td><td>the directory in which to archive the storage (optional) </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="Archiver_8cc_source.html#l00112">112</a> of file <a class="el" href="Archiver_8cc_source.html">Archiver.cc</a>.</p>

<p>References <a class="el" href="Archiver_8h_source.html#l00163">m_file</a>, <a class="el" href="Archiver_8cc_source.html#l00152">prepareForAchiving()</a>, <a class="el" href="Archiver_8cc_source.html#l00171">recursiveWrite()</a>, <a class="el" href="StatusCodes_8h_source.html#l00039">RETURN_RESULT_IF</a>, and <a class="el" href="Storage_8h_source.html#l00296">dqm4hep::core::Storage&lt; T &gt;::root()</a>.</p>
<div class="fragment"><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;                                                                                                 {</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;      TDirectory *directory = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;      <a class="code" href="StatusCodes_8h.html#a25aeabada9910a1ce63f8eb0de4d8dda">RETURN_RESULT_IF</a>(STATUS_CODE_SUCCESS, !=, <a class="code" href="classdqm4hep_1_1core_1_1Archiver.html#a041ab405ea58b9d483c4cc8b3faeb5e6">prepareForAchiving</a>(dirName, directory));</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;      <a class="code" href="StatusCodes_8h.html#a25aeabada9910a1ce63f8eb0de4d8dda">RETURN_RESULT_IF</a>(STATUS_CODE_SUCCESS, !=, <a class="code" href="classdqm4hep_1_1core_1_1Archiver.html#a042c3f10ac309a93155a5d67e2c335f6">recursiveWrite</a>(storage.root(), directory, <span class="stringliteral">&quot;&quot;</span>));</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;      <a class="code" href="classdqm4hep_1_1core_1_1Archiver.html#a597c9b43db92ba53af53e363a3ea839b">m_file</a>-&gt;cd();</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;      <a class="code" href="classdqm4hep_1_1core_1_1Archiver.html#a597c9b43db92ba53af53e363a3ea839b">m_file</a>-&gt;Write();</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;      <span class="keywordflow">return</span> STATUS_CODE_SUCCESS;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    }</div>
<div class="ttc" id="StatusCodes_8h_html_a25aeabada9910a1ce63f8eb0de4d8dda"><div class="ttname"><a href="StatusCodes_8h.html#a25aeabada9910a1ce63f8eb0de4d8dda">RETURN_RESULT_IF</a></div><div class="ttdeci">#define RETURN_RESULT_IF(StatusCode1, Operator, Command)</div><div class="ttdef"><b>Definition:</b> <a href="StatusCodes_8h_source.html#l00039">StatusCodes.h:39</a></div></div>
<div class="ttc" id="classdqm4hep_1_1core_1_1Archiver_html_a041ab405ea58b9d483c4cc8b3faeb5e6"><div class="ttname"><a href="classdqm4hep_1_1core_1_1Archiver.html#a041ab405ea58b9d483c4cc8b3faeb5e6">dqm4hep::core::Archiver::prepareForAchiving</a></div><div class="ttdeci">StatusCode prepareForAchiving(const std::string &amp;dirName, TDirectory *&amp;directory)</div><div class="ttdoc">Prepare the ROOT file for archiving. </div><div class="ttdef"><b>Definition:</b> <a href="Archiver_8cc_source.html#l00152">Archiver.cc:152</a></div></div>
<div class="ttc" id="classdqm4hep_1_1core_1_1Archiver_html_a597c9b43db92ba53af53e363a3ea839b"><div class="ttname"><a href="classdqm4hep_1_1core_1_1Archiver.html#a597c9b43db92ba53af53e363a3ea839b">dqm4hep::core::Archiver::m_file</a></div><div class="ttdeci">std::unique_ptr&lt; TFile &gt; m_file</div><div class="ttdef"><b>Definition:</b> <a href="Archiver_8h_source.html#l00163">Archiver.h:163</a></div></div>
<div class="ttc" id="classdqm4hep_1_1core_1_1Archiver_html_a042c3f10ac309a93155a5d67e2c335f6"><div class="ttname"><a href="classdqm4hep_1_1core_1_1Archiver.html#a042c3f10ac309a93155a5d67e2c335f6">dqm4hep::core::Archiver::recursiveWrite</a></div><div class="ttdeci">static StatusCode recursiveWrite(MonitorElementDir directory, TDirectory *rootDirectory, const std::string &amp;refSuffix=&quot;&quot;)</div><div class="ttdoc">Fill recursively the TDirectory with the Directory. </div><div class="ttdef"><b>Definition:</b> <a href="Archiver_8cc_source.html#l00171">Archiver.cc:171</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae87f65d5f24a01637bff93e155719e11"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacedqm4hep_1_1core.html#af0b0a4c04ab15f7bb082f3b9943a6fbd">StatusCode</a> dqm4hep::core::Archiver::archiveWithReferences </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classdqm4hep_1_1core_1_1Storage.html">Storage</a>&lt; <a class="el" href="classdqm4hep_1_1core_1_1MonitorElement.html">MonitorElement</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>storage</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>dirName</em> = <code>&quot;&quot;</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>refSuffix</em> = <code>&quot;_ref&quot;</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Archive the monitor element storage in the ROOT file. </p>
<p>Also archive the references along with the monitor object in the same directory. The reference is written with the same name as the object plus a suffix (default "_ref"). The result can be written in a specific directory using the dirName argument. By default, the content is written directly in the top-level directory.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">storage</td><td>the storage to archive </td></tr>
    <tr><td class="paramname">dirName</td><td>the directory in which to archive the storage (optional) </td></tr>
    <tr><td class="paramname">refSuffix</td><td>the reference name suffix (optional) </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="Archiver_8cc_source.html#l00123">123</a> of file <a class="el" href="Archiver_8cc_source.html">Archiver.cc</a>.</p>

<p>References <a class="el" href="Archiver_8h_source.html#l00163">m_file</a>, <a class="el" href="Archiver_8cc_source.html#l00152">prepareForAchiving()</a>, <a class="el" href="Archiver_8cc_source.html#l00171">recursiveWrite()</a>, <a class="el" href="StatusCodes_8h_source.html#l00039">RETURN_RESULT_IF</a>, and <a class="el" href="Storage_8h_source.html#l00296">dqm4hep::core::Storage&lt; T &gt;::root()</a>.</p>

<p>Referenced by <a class="el" href="MonitorElementManager_8cc_source.html#l00472">dqm4hep::core::MonitorElementManager::archive()</a>.</p>
<div class="fragment"><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;                                                                                                                                           {</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;      TDirectory *directory = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;      <a class="code" href="StatusCodes_8h.html#a25aeabada9910a1ce63f8eb0de4d8dda">RETURN_RESULT_IF</a>(STATUS_CODE_SUCCESS, !=, <a class="code" href="classdqm4hep_1_1core_1_1Archiver.html#a041ab405ea58b9d483c4cc8b3faeb5e6">prepareForAchiving</a>(dirName, directory));</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;      <a class="code" href="StatusCodes_8h.html#a25aeabada9910a1ce63f8eb0de4d8dda">RETURN_RESULT_IF</a>(STATUS_CODE_SUCCESS, !=, <a class="code" href="classdqm4hep_1_1core_1_1Archiver.html#a042c3f10ac309a93155a5d67e2c335f6">recursiveWrite</a>(storage.root(), directory, refSuffix));</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;      <a class="code" href="classdqm4hep_1_1core_1_1Archiver.html#a597c9b43db92ba53af53e363a3ea839b">m_file</a>-&gt;cd();</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;      <a class="code" href="classdqm4hep_1_1core_1_1Archiver.html#a597c9b43db92ba53af53e363a3ea839b">m_file</a>-&gt;Write();</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;      <span class="keywordflow">return</span> STATUS_CODE_SUCCESS;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    }</div>
<div class="ttc" id="StatusCodes_8h_html_a25aeabada9910a1ce63f8eb0de4d8dda"><div class="ttname"><a href="StatusCodes_8h.html#a25aeabada9910a1ce63f8eb0de4d8dda">RETURN_RESULT_IF</a></div><div class="ttdeci">#define RETURN_RESULT_IF(StatusCode1, Operator, Command)</div><div class="ttdef"><b>Definition:</b> <a href="StatusCodes_8h_source.html#l00039">StatusCodes.h:39</a></div></div>
<div class="ttc" id="classdqm4hep_1_1core_1_1Archiver_html_a041ab405ea58b9d483c4cc8b3faeb5e6"><div class="ttname"><a href="classdqm4hep_1_1core_1_1Archiver.html#a041ab405ea58b9d483c4cc8b3faeb5e6">dqm4hep::core::Archiver::prepareForAchiving</a></div><div class="ttdeci">StatusCode prepareForAchiving(const std::string &amp;dirName, TDirectory *&amp;directory)</div><div class="ttdoc">Prepare the ROOT file for archiving. </div><div class="ttdef"><b>Definition:</b> <a href="Archiver_8cc_source.html#l00152">Archiver.cc:152</a></div></div>
<div class="ttc" id="classdqm4hep_1_1core_1_1Archiver_html_a597c9b43db92ba53af53e363a3ea839b"><div class="ttname"><a href="classdqm4hep_1_1core_1_1Archiver.html#a597c9b43db92ba53af53e363a3ea839b">dqm4hep::core::Archiver::m_file</a></div><div class="ttdeci">std::unique_ptr&lt; TFile &gt; m_file</div><div class="ttdef"><b>Definition:</b> <a href="Archiver_8h_source.html#l00163">Archiver.h:163</a></div></div>
<div class="ttc" id="classdqm4hep_1_1core_1_1Archiver_html_a042c3f10ac309a93155a5d67e2c335f6"><div class="ttname"><a href="classdqm4hep_1_1core_1_1Archiver.html#a042c3f10ac309a93155a5d67e2c335f6">dqm4hep::core::Archiver::recursiveWrite</a></div><div class="ttdeci">static StatusCode recursiveWrite(MonitorElementDir directory, TDirectory *rootDirectory, const std::string &amp;refSuffix=&quot;&quot;)</div><div class="ttdoc">Fill recursively the TDirectory with the Directory. </div><div class="ttdef"><b>Definition:</b> <a href="Archiver_8cc_source.html#l00171">Archiver.cc:171</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a860bfab6fb5561a717c8d2329fc158f7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacedqm4hep_1_1core.html#af0b0a4c04ab15f7bb082f3b9943a6fbd">StatusCode</a> dqm4hep::core::Archiver::close </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Close the current archive. </p>

<p>Definition at line <a class="el" href="Archiver_8cc_source.html#l00099">99</a> of file <a class="el" href="Archiver_8cc_source.html">Archiver.cc</a>.</p>

<p>References <a class="el" href="Archiver_8cc_source.html#l00140">isOpened()</a>, <a class="el" href="Archiver_8h_source.html#l00163">m_file</a>, <a class="el" href="Archiver_8h_source.html#l00161">m_isOpened</a>, and <a class="el" href="Archiver_8h_source.html#l00159">m_openingMode</a>.</p>

<p>Referenced by <a class="el" href="Archiver_8cc_source.html#l00057">open()</a>, and <a class="el" href="Archiver_8cc_source.html#l00050">~Archiver()</a>.</p>
<div class="fragment"><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;                               {</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;      <span class="keywordflow">if</span> (not <a class="code" href="classdqm4hep_1_1core_1_1Archiver.html#a822bb8b77f5f8327eb355c7000c63cbe">isOpened</a>()) {</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        <span class="keywordflow">return</span> STATUS_CODE_SUCCESS;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;      }</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;      <a class="code" href="classdqm4hep_1_1core_1_1Archiver.html#a597c9b43db92ba53af53e363a3ea839b">m_file</a>-&gt;Close();</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;      <a class="code" href="classdqm4hep_1_1core_1_1Archiver.html#a597c9b43db92ba53af53e363a3ea839b">m_file</a>.reset(<span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;      <a class="code" href="classdqm4hep_1_1core_1_1Archiver.html#a9adffe73065c778afc5da4437a2d002e">m_isOpened</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;      <a class="code" href="classdqm4hep_1_1core_1_1Archiver.html#acaea9288891f6aba89e9025c7267b3b8">m_openingMode</a> = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;      <span class="keywordflow">return</span> STATUS_CODE_SUCCESS;</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    }</div>
<div class="ttc" id="classdqm4hep_1_1core_1_1Archiver_html_a822bb8b77f5f8327eb355c7000c63cbe"><div class="ttname"><a href="classdqm4hep_1_1core_1_1Archiver.html#a822bb8b77f5f8327eb355c7000c63cbe">dqm4hep::core::Archiver::isOpened</a></div><div class="ttdeci">bool isOpened() const </div><div class="ttdoc">Whether the archive is opened. </div><div class="ttdef"><b>Definition:</b> <a href="Archiver_8cc_source.html#l00140">Archiver.cc:140</a></div></div>
<div class="ttc" id="classdqm4hep_1_1core_1_1Archiver_html_a9adffe73065c778afc5da4437a2d002e"><div class="ttname"><a href="classdqm4hep_1_1core_1_1Archiver.html#a9adffe73065c778afc5da4437a2d002e">dqm4hep::core::Archiver::m_isOpened</a></div><div class="ttdeci">bool m_isOpened</div><div class="ttdoc">The actual archive implementation (root file) </div><div class="ttdef"><b>Definition:</b> <a href="Archiver_8h_source.html#l00161">Archiver.h:161</a></div></div>
<div class="ttc" id="classdqm4hep_1_1core_1_1Archiver_html_a597c9b43db92ba53af53e363a3ea839b"><div class="ttname"><a href="classdqm4hep_1_1core_1_1Archiver.html#a597c9b43db92ba53af53e363a3ea839b">dqm4hep::core::Archiver::m_file</a></div><div class="ttdeci">std::unique_ptr&lt; TFile &gt; m_file</div><div class="ttdef"><b>Definition:</b> <a href="Archiver_8h_source.html#l00163">Archiver.h:163</a></div></div>
<div class="ttc" id="classdqm4hep_1_1core_1_1Archiver_html_acaea9288891f6aba89e9025c7267b3b8"><div class="ttname"><a href="classdqm4hep_1_1core_1_1Archiver.html#acaea9288891f6aba89e9025c7267b3b8">dqm4hep::core::Archiver::m_openingMode</a></div><div class="ttdeci">std::string m_openingMode</div><div class="ttdoc">The root file opening mode. </div><div class="ttdef"><b>Definition:</b> <a href="Archiver_8h_source.html#l00159">Archiver.h:159</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aaf5702da30da3913de3fb38535f1aa57"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const std::string &amp; dqm4hep::core::Archiver::fileName </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the file name. </p>

<p>Definition at line <a class="el" href="Archiver_8cc_source.html#l00134">134</a> of file <a class="el" href="Archiver_8cc_source.html">Archiver.cc</a>.</p>

<p>References <a class="el" href="Archiver_8h_source.html#l00157">m_fileName</a>.</p>
<div class="fragment"><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;                                              {</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classdqm4hep_1_1core_1_1Archiver.html#acce8d6d20b5a171d7251c0fd1859505d">m_fileName</a>;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    }</div>
<div class="ttc" id="classdqm4hep_1_1core_1_1Archiver_html_acce8d6d20b5a171d7251c0fd1859505d"><div class="ttname"><a href="classdqm4hep_1_1core_1_1Archiver.html#acce8d6d20b5a171d7251c0fd1859505d">dqm4hep::core::Archiver::m_fileName</a></div><div class="ttdeci">std::string m_fileName</div><div class="ttdoc">The archive file name. </div><div class="ttdef"><b>Definition:</b> <a href="Archiver_8h_source.html#l00157">Archiver.h:157</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a822bb8b77f5f8327eb355c7000c63cbe"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool dqm4hep::core::Archiver::isOpened </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Whether the archive is opened. </p>

<p>Definition at line <a class="el" href="Archiver_8cc_source.html#l00140">140</a> of file <a class="el" href="Archiver_8cc_source.html">Archiver.cc</a>.</p>

<p>References <a class="el" href="Archiver_8h_source.html#l00161">m_isOpened</a>.</p>

<p>Referenced by <a class="el" href="Archiver_8cc_source.html#l00099">close()</a>, <a class="el" href="Archiver_8cc_source.html#l00057">open()</a>, <a class="el" href="Archiver_8cc_source.html#l00152">prepareForAchiving()</a>, and <a class="el" href="Archiver_8cc_source.html#l00050">~Archiver()</a>.</p>
<div class="fragment"><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;                                  {</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classdqm4hep_1_1core_1_1Archiver.html#a9adffe73065c778afc5da4437a2d002e">m_isOpened</a>;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    }</div>
<div class="ttc" id="classdqm4hep_1_1core_1_1Archiver_html_a9adffe73065c778afc5da4437a2d002e"><div class="ttname"><a href="classdqm4hep_1_1core_1_1Archiver.html#a9adffe73065c778afc5da4437a2d002e">dqm4hep::core::Archiver::m_isOpened</a></div><div class="ttdeci">bool m_isOpened</div><div class="ttdoc">The actual archive implementation (root file) </div><div class="ttdef"><b>Definition:</b> <a href="Archiver_8h_source.html#l00161">Archiver.h:161</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa4e4d232c02c72867b7c7c968350ab7f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacedqm4hep_1_1core.html#af0b0a4c04ab15f7bb082f3b9943a6fbd">StatusCode</a> dqm4hep::core::Archiver::open </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>fname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>opMode</em> = <code>&quot;RECREATE&quot;</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>overwrite</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Open a new archive. </p>
<p>Close the current file if opened. Supported opening mode are the TFile opening mode option (see TFile). If overwrite is set to false, an id is appended before the .root extension to ensure the file name is unique and no archive is overwritten</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fname</td><td>the ROOT file name to open </td></tr>
    <tr><td class="paramname">opMode</td><td>the ROOT file opening mode </td></tr>
    <tr><td class="paramname">overwrite</td><td>whether to allow for overwrite </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="Archiver_8cc_source.html#l00057">57</a> of file <a class="el" href="Archiver_8cc_source.html">Archiver.cc</a>.</p>

<p>References <a class="el" href="Archiver_8cc_source.html#l00099">close()</a>, <a class="el" href="Logging_8h_source.html#l00045">dqm_error</a>, <a class="el" href="Logging_8h_source.html#l00047">dqm_info</a>, <a class="el" href="Archiver_8cc_source.html#l00140">isOpened()</a>, <a class="el" href="Archiver_8h_source.html#l00163">m_file</a>, <a class="el" href="Archiver_8h_source.html#l00157">m_fileName</a>, <a class="el" href="Archiver_8h_source.html#l00161">m_isOpened</a>, <a class="el" href="Archiver_8h_source.html#l00159">m_openingMode</a>, and <a class="el" href="StatusCodes_8h_source.html#l00039">RETURN_RESULT_IF</a>.</p>

<p>Referenced by <a class="el" href="Archiver_8cc_source.html#l00044">Archiver()</a>.</p>
<div class="fragment"><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;                                                                                             {</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;      <span class="comment">// if already open write the archive if not done</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;      <span class="comment">// and close it before to re-open</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classdqm4hep_1_1core_1_1Archiver.html#a822bb8b77f5f8327eb355c7000c63cbe">isOpened</a>()) {</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;        <a class="code" href="StatusCodes_8h.html#a25aeabada9910a1ce63f8eb0de4d8dda">RETURN_RESULT_IF</a>(STATUS_CODE_SUCCESS, !=, <a class="code" href="classdqm4hep_1_1core_1_1Archiver.html#a860bfab6fb5561a717c8d2329fc158f7">close</a>());</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;      }</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;      <span class="keywordflow">if</span> (fname.empty()) {</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;        <span class="keywordflow">return</span> STATUS_CODE_INVALID_PARAMETER;</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;      }</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;      <span class="keywordflow">if</span> (not overwrite) {</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;        <span class="keywordtype">int</span> fileId(0);</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;        <span class="keywordtype">size_t</span> pos = fname.rfind(<span class="stringliteral">&quot;.root&quot;</span>);</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;        <span class="keywordflow">if</span> (std::string::npos == pos) {</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;          <a class="code" href="Logging_8h.html#a491803e6943ef6dac7a84b79dd9eaea7">dqm_error</a>(<span class="stringliteral">&quot;Couldn&#39;t open archive &#39;{0}&#39; ! Must be a root file !&quot;</span>, fname);</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;          <span class="keywordflow">return</span> STATUS_CODE_INVALID_PARAMETER;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;        }</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;        std::string baseArchiveName = fname.substr(0, pos);</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;        std::string fullArchiveName = fname; </div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;        <span class="keywordflow">while</span> (!gSystem-&gt;AccessPathName(fullArchiveName.c_str())) {</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;          std::stringstream ss;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;          ss &lt;&lt; baseArchiveName &lt;&lt; <span class="stringliteral">&quot;_&quot;</span> &lt;&lt; fileId &lt;&lt; <span class="stringliteral">&quot;.root&quot;</span>;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;          fullArchiveName = ss.str();</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;          fileId++;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;        }</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        <a class="code" href="classdqm4hep_1_1core_1_1Archiver.html#acce8d6d20b5a171d7251c0fd1859505d">m_fileName</a> = fullArchiveName;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;      } </div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;      <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;        <a class="code" href="classdqm4hep_1_1core_1_1Archiver.html#acce8d6d20b5a171d7251c0fd1859505d">m_fileName</a> = fname;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;      }</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;      <a class="code" href="classdqm4hep_1_1core_1_1Archiver.html#acaea9288891f6aba89e9025c7267b3b8">m_openingMode</a> = opMode;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;      <a class="code" href="Logging_8h.html#af06e81e068fdce66fa6920f65a774d13">dqm_info</a>(<span class="stringliteral">&quot;Archiver::open: Opening archive {0}&quot;</span>, <a class="code" href="classdqm4hep_1_1core_1_1Archiver.html#acce8d6d20b5a171d7251c0fd1859505d">m_fileName</a>);</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;      <a class="code" href="classdqm4hep_1_1core_1_1Archiver.html#a597c9b43db92ba53af53e363a3ea839b">m_file</a>.reset(<span class="keyword">new</span> TFile(<a class="code" href="classdqm4hep_1_1core_1_1Archiver.html#acce8d6d20b5a171d7251c0fd1859505d">m_fileName</a>.c_str(), <a class="code" href="classdqm4hep_1_1core_1_1Archiver.html#acaea9288891f6aba89e9025c7267b3b8">m_openingMode</a>.c_str()));</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">nullptr</span> == <a class="code" href="classdqm4hep_1_1core_1_1Archiver.html#a597c9b43db92ba53af53e363a3ea839b">m_file</a>) {</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;        <a class="code" href="Logging_8h.html#a491803e6943ef6dac7a84b79dd9eaea7">dqm_error</a>(<span class="stringliteral">&quot;Archiver::open: Couldn&#39;t open archive &#39;{0}&#39; !&quot;</span>, <a class="code" href="classdqm4hep_1_1core_1_1Archiver.html#acce8d6d20b5a171d7251c0fd1859505d">m_fileName</a>);</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;        <span class="keywordflow">return</span> STATUS_CODE_FAILURE;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;      }</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;      <a class="code" href="classdqm4hep_1_1core_1_1Archiver.html#a9adffe73065c778afc5da4437a2d002e">m_isOpened</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;      <span class="keywordflow">return</span> STATUS_CODE_SUCCESS;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    }</div>
<div class="ttc" id="StatusCodes_8h_html_a25aeabada9910a1ce63f8eb0de4d8dda"><div class="ttname"><a href="StatusCodes_8h.html#a25aeabada9910a1ce63f8eb0de4d8dda">RETURN_RESULT_IF</a></div><div class="ttdeci">#define RETURN_RESULT_IF(StatusCode1, Operator, Command)</div><div class="ttdef"><b>Definition:</b> <a href="StatusCodes_8h_source.html#l00039">StatusCodes.h:39</a></div></div>
<div class="ttc" id="classdqm4hep_1_1core_1_1Archiver_html_a860bfab6fb5561a717c8d2329fc158f7"><div class="ttname"><a href="classdqm4hep_1_1core_1_1Archiver.html#a860bfab6fb5561a717c8d2329fc158f7">dqm4hep::core::Archiver::close</a></div><div class="ttdeci">StatusCode close()</div><div class="ttdoc">Close the current archive. </div><div class="ttdef"><b>Definition:</b> <a href="Archiver_8cc_source.html#l00099">Archiver.cc:99</a></div></div>
<div class="ttc" id="Logging_8h_html_af06e81e068fdce66fa6920f65a774d13"><div class="ttname"><a href="Logging_8h.html#af06e81e068fdce66fa6920f65a774d13">dqm_info</a></div><div class="ttdeci">#define dqm_info(...)</div><div class="ttdef"><b>Definition:</b> <a href="Logging_8h_source.html#l00047">Logging.h:47</a></div></div>
<div class="ttc" id="classdqm4hep_1_1core_1_1Archiver_html_a822bb8b77f5f8327eb355c7000c63cbe"><div class="ttname"><a href="classdqm4hep_1_1core_1_1Archiver.html#a822bb8b77f5f8327eb355c7000c63cbe">dqm4hep::core::Archiver::isOpened</a></div><div class="ttdeci">bool isOpened() const </div><div class="ttdoc">Whether the archive is opened. </div><div class="ttdef"><b>Definition:</b> <a href="Archiver_8cc_source.html#l00140">Archiver.cc:140</a></div></div>
<div class="ttc" id="classdqm4hep_1_1core_1_1Archiver_html_acce8d6d20b5a171d7251c0fd1859505d"><div class="ttname"><a href="classdqm4hep_1_1core_1_1Archiver.html#acce8d6d20b5a171d7251c0fd1859505d">dqm4hep::core::Archiver::m_fileName</a></div><div class="ttdeci">std::string m_fileName</div><div class="ttdoc">The archive file name. </div><div class="ttdef"><b>Definition:</b> <a href="Archiver_8h_source.html#l00157">Archiver.h:157</a></div></div>
<div class="ttc" id="classdqm4hep_1_1core_1_1Archiver_html_a9adffe73065c778afc5da4437a2d002e"><div class="ttname"><a href="classdqm4hep_1_1core_1_1Archiver.html#a9adffe73065c778afc5da4437a2d002e">dqm4hep::core::Archiver::m_isOpened</a></div><div class="ttdeci">bool m_isOpened</div><div class="ttdoc">The actual archive implementation (root file) </div><div class="ttdef"><b>Definition:</b> <a href="Archiver_8h_source.html#l00161">Archiver.h:161</a></div></div>
<div class="ttc" id="classdqm4hep_1_1core_1_1Archiver_html_a597c9b43db92ba53af53e363a3ea839b"><div class="ttname"><a href="classdqm4hep_1_1core_1_1Archiver.html#a597c9b43db92ba53af53e363a3ea839b">dqm4hep::core::Archiver::m_file</a></div><div class="ttdeci">std::unique_ptr&lt; TFile &gt; m_file</div><div class="ttdef"><b>Definition:</b> <a href="Archiver_8h_source.html#l00163">Archiver.h:163</a></div></div>
<div class="ttc" id="Logging_8h_html_a491803e6943ef6dac7a84b79dd9eaea7"><div class="ttname"><a href="Logging_8h.html#a491803e6943ef6dac7a84b79dd9eaea7">dqm_error</a></div><div class="ttdeci">#define dqm_error(...)</div><div class="ttdef"><b>Definition:</b> <a href="Logging_8h_source.html#l00045">Logging.h:45</a></div></div>
<div class="ttc" id="classdqm4hep_1_1core_1_1Archiver_html_acaea9288891f6aba89e9025c7267b3b8"><div class="ttname"><a href="classdqm4hep_1_1core_1_1Archiver.html#acaea9288891f6aba89e9025c7267b3b8">dqm4hep::core::Archiver::m_openingMode</a></div><div class="ttdeci">std::string m_openingMode</div><div class="ttdoc">The root file opening mode. </div><div class="ttdef"><b>Definition:</b> <a href="Archiver_8h_source.html#l00159">Archiver.h:159</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="abd092a39c60942ccbdf9a274b167cee3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const std::string &amp; dqm4hep::core::Archiver::openingMode </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the opening mode of this archive. </p>

<p>Definition at line <a class="el" href="Archiver_8cc_source.html#l00146">146</a> of file <a class="el" href="Archiver_8cc_source.html">Archiver.cc</a>.</p>

<p>References <a class="el" href="Archiver_8h_source.html#l00159">m_openingMode</a>.</p>
<div class="fragment"><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;                                                 {</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classdqm4hep_1_1core_1_1Archiver.html#acaea9288891f6aba89e9025c7267b3b8">m_openingMode</a>;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    }</div>
<div class="ttc" id="classdqm4hep_1_1core_1_1Archiver_html_acaea9288891f6aba89e9025c7267b3b8"><div class="ttname"><a href="classdqm4hep_1_1core_1_1Archiver.html#acaea9288891f6aba89e9025c7267b3b8">dqm4hep::core::Archiver::m_openingMode</a></div><div class="ttdeci">std::string m_openingMode</div><div class="ttdoc">The root file opening mode. </div><div class="ttdef"><b>Definition:</b> <a href="Archiver_8h_source.html#l00159">Archiver.h:159</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a0cb3c36bbc2b8fcc65d3f49e0c6364b6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classdqm4hep_1_1core_1_1Archiver.html">Archiver</a>&amp; dqm4hep::core::Archiver::operator= </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classdqm4hep_1_1core_1_1Archiver.html">Archiver</a> &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a041ab405ea58b9d483c4cc8b3faeb5e6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacedqm4hep_1_1core.html#af0b0a4c04ab15f7bb082f3b9943a6fbd">StatusCode</a> dqm4hep::core::Archiver::prepareForAchiving </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>dirName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TDirectory *&amp;&#160;</td>
          <td class="paramname"><em>directory</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Prepare the ROOT file for archiving. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dirName</td><td>the top-level root directory in which the elements will be archived </td></tr>
    <tr><td class="paramname">directory</td><td>the top-level directory pointer to receive </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="Archiver_8cc_source.html#l00152">152</a> of file <a class="el" href="Archiver_8cc_source.html">Archiver.cc</a>.</p>

<p>References <a class="el" href="Archiver_8cc_source.html#l00140">isOpened()</a>, and <a class="el" href="Archiver_8h_source.html#l00163">m_file</a>.</p>

<p>Referenced by <a class="el" href="Archiver_8cc_source.html#l00112">archive()</a>, and <a class="el" href="Archiver_8cc_source.html#l00123">archiveWithReferences()</a>.</p>
<div class="fragment"><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;                                                                                            {</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;      <span class="keywordflow">if</span>(not <a class="code" href="classdqm4hep_1_1core_1_1Archiver.html#a822bb8b77f5f8327eb355c7000c63cbe">isOpened</a>()) {</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        <span class="keywordflow">return</span> STATUS_CODE_NOT_INITIALIZED;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;      }</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;      directory = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;      <span class="keywordflow">if</span> (!dirName.empty()) {</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;        directory = <a class="code" href="classdqm4hep_1_1core_1_1Archiver.html#a597c9b43db92ba53af53e363a3ea839b">m_file</a>-&gt;mkdir(dirName.c_str());</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        <span class="keywordflow">if</span> (directory == <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;          <span class="keywordflow">return</span> STATUS_CODE_FAILURE;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        }</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;      } </div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;      <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        directory = <a class="code" href="classdqm4hep_1_1core_1_1Archiver.html#a597c9b43db92ba53af53e363a3ea839b">m_file</a>.get();</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;      }</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;      <span class="keywordflow">return</span> STATUS_CODE_SUCCESS;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    }</div>
<div class="ttc" id="classdqm4hep_1_1core_1_1Archiver_html_a822bb8b77f5f8327eb355c7000c63cbe"><div class="ttname"><a href="classdqm4hep_1_1core_1_1Archiver.html#a822bb8b77f5f8327eb355c7000c63cbe">dqm4hep::core::Archiver::isOpened</a></div><div class="ttdeci">bool isOpened() const </div><div class="ttdoc">Whether the archive is opened. </div><div class="ttdef"><b>Definition:</b> <a href="Archiver_8cc_source.html#l00140">Archiver.cc:140</a></div></div>
<div class="ttc" id="classdqm4hep_1_1core_1_1Archiver_html_a597c9b43db92ba53af53e363a3ea839b"><div class="ttname"><a href="classdqm4hep_1_1core_1_1Archiver.html#a597c9b43db92ba53af53e363a3ea839b">dqm4hep::core::Archiver::m_file</a></div><div class="ttdeci">std::unique_ptr&lt; TFile &gt; m_file</div><div class="ttdef"><b>Definition:</b> <a href="Archiver_8h_source.html#l00163">Archiver.h:163</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a042c3f10ac309a93155a5d67e2c335f6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacedqm4hep_1_1core.html#af0b0a4c04ab15f7bb082f3b9943a6fbd">StatusCode</a> dqm4hep::core::Archiver::recursiveWrite </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacedqm4hep_1_1core.html#a66e5fe06f35aace0c904c8a621cc4e00">MonitorElementDir</a>&#160;</td>
          <td class="paramname"><em>directory</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TDirectory *&#160;</td>
          <td class="paramname"><em>rootDirectory</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>refSuffix</em> = <code>&quot;&quot;</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Fill recursively the TDirectory with the <a class="el" href="classdqm4hep_1_1core_1_1Directory.html" title="Directory class. ">Directory</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">directory</td><td>the monitor element storage directory </td></tr>
    <tr><td class="paramname">rootDirectory</td><td>the corresponding ROOT directory </td></tr>
    <tr><td class="paramname">refSuffix</td><td>the suffix to add for object references </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="Archiver_8cc_source.html#l00171">171</a> of file <a class="el" href="Archiver_8cc_source.html">Archiver.cc</a>.</p>

<p>References <a class="el" href="StatusCodes_8h_source.html#l00039">RETURN_RESULT_IF</a>, and <a class="el" href="Archiver_8cc_source.html#l00193">writeMonitorElements()</a>.</p>

<p>Referenced by <a class="el" href="Archiver_8cc_source.html#l00112">archive()</a>, and <a class="el" href="Archiver_8cc_source.html#l00123">archiveWithReferences()</a>.</p>
<div class="fragment"><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;                                                                                                                          {</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">nullptr</span> == directory || <span class="keyword">nullptr</span> == rootDirectory) {</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        <span class="keywordflow">return</span> STATUS_CODE_INVALID_PTR;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;      }</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;      rootDirectory-&gt;cd();</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;      <span class="keyword">const</span> <span class="keyword">auto</span> &amp;subDirList(directory-&gt;subdirs());</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> iter = subDirList.begin(), endIter = subDirList.end(); endIter != iter; ++iter) {</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        <span class="keyword">auto</span> subDir = *iter;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        TDirectory *rootSubDirectory = rootDirectory-&gt;mkdir(subDir-&gt;name().c_str());</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        <span class="keywordflow">if</span> (<span class="keyword">nullptr</span> != rootSubDirectory) {</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;          <a class="code" href="StatusCodes_8h.html#a25aeabada9910a1ce63f8eb0de4d8dda">RETURN_RESULT_IF</a>(STATUS_CODE_SUCCESS, !=, <a class="code" href="classdqm4hep_1_1core_1_1Archiver.html#a042c3f10ac309a93155a5d67e2c335f6">Archiver::recursiveWrite</a>(subDir, rootSubDirectory, refSuffix));</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        }</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;      }</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;      <span class="comment">// write the monitor elements</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;      <span class="keywordflow">if</span> (not directory-&gt;isEmpty()) {</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        <a class="code" href="StatusCodes_8h.html#a25aeabada9910a1ce63f8eb0de4d8dda">RETURN_RESULT_IF</a>(STATUS_CODE_SUCCESS, !=, <a class="code" href="classdqm4hep_1_1core_1_1Archiver.html#ace67cbe514ea576c5b13745149ec61af">Archiver::writeMonitorElements</a>(directory, rootDirectory, refSuffix));</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;      }</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;      <span class="keywordflow">return</span> STATUS_CODE_SUCCESS;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    }</div>
<div class="ttc" id="StatusCodes_8h_html_a25aeabada9910a1ce63f8eb0de4d8dda"><div class="ttname"><a href="StatusCodes_8h.html#a25aeabada9910a1ce63f8eb0de4d8dda">RETURN_RESULT_IF</a></div><div class="ttdeci">#define RETURN_RESULT_IF(StatusCode1, Operator, Command)</div><div class="ttdef"><b>Definition:</b> <a href="StatusCodes_8h_source.html#l00039">StatusCodes.h:39</a></div></div>
<div class="ttc" id="classdqm4hep_1_1core_1_1Archiver_html_ace67cbe514ea576c5b13745149ec61af"><div class="ttname"><a href="classdqm4hep_1_1core_1_1Archiver.html#ace67cbe514ea576c5b13745149ec61af">dqm4hep::core::Archiver::writeMonitorElements</a></div><div class="ttdeci">static StatusCode writeMonitorElements(MonitorElementDir directory, TDirectory *rootDirectory, const std::string &amp;refSuffix=&quot;&quot;)</div><div class="ttdoc">Write the monitor elements contained in the Directory in the TDirectory. </div><div class="ttdef"><b>Definition:</b> <a href="Archiver_8cc_source.html#l00193">Archiver.cc:193</a></div></div>
<div class="ttc" id="classdqm4hep_1_1core_1_1Archiver_html_a042c3f10ac309a93155a5d67e2c335f6"><div class="ttname"><a href="classdqm4hep_1_1core_1_1Archiver.html#a042c3f10ac309a93155a5d67e2c335f6">dqm4hep::core::Archiver::recursiveWrite</a></div><div class="ttdeci">static StatusCode recursiveWrite(MonitorElementDir directory, TDirectory *rootDirectory, const std::string &amp;refSuffix=&quot;&quot;)</div><div class="ttdoc">Fill recursively the TDirectory with the Directory. </div><div class="ttdef"><b>Definition:</b> <a href="Archiver_8cc_source.html#l00171">Archiver.cc:171</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ace67cbe514ea576c5b13745149ec61af"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacedqm4hep_1_1core.html#af0b0a4c04ab15f7bb082f3b9943a6fbd">StatusCode</a> dqm4hep::core::Archiver::writeMonitorElements </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacedqm4hep_1_1core.html#a66e5fe06f35aace0c904c8a621cc4e00">MonitorElementDir</a>&#160;</td>
          <td class="paramname"><em>directory</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TDirectory *&#160;</td>
          <td class="paramname"><em>rootDirectory</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>refSuffix</em> = <code>&quot;&quot;</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Write the monitor elements contained in the <a class="el" href="classdqm4hep_1_1core_1_1Directory.html" title="Directory class. ">Directory</a> in the TDirectory. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">directory</td><td>the monitor element storage directory </td></tr>
    <tr><td class="paramname">rootDirectory</td><td>the corresponding ROOT directory </td></tr>
    <tr><td class="paramname">refSuffix</td><td>the suffix to add for object references </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="Archiver_8cc_source.html#l00193">193</a> of file <a class="el" href="Archiver_8cc_source.html">Archiver.cc</a>.</p>

<p>Referenced by <a class="el" href="Archiver_8cc_source.html#l00171">recursiveWrite()</a>.</p>
<div class="fragment"><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;                                                                                                                                {</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">nullptr</span> == directory || <span class="keyword">nullptr</span> == rootDirectory) {</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;        <span class="keywordflow">return</span> STATUS_CODE_INVALID_PTR;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;      }</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;      rootDirectory-&gt;cd();</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;      <span class="keyword">const</span> <span class="keyword">auto</span> &amp;monitorElementList(directory-&gt;contents());</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> iter = monitorElementList.begin(), endIter = monitorElementList.end(); endIter != iter; ++iter) {</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;        <span class="keyword">const</span> std::string writeName = (*iter)-&gt;name();</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        TObject *<span class="keywordtype">object</span> = (*iter)-&gt;object();</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;        <span class="keywordflow">if</span>(<span class="keyword">nullptr</span> != <span class="keywordtype">object</span>) {</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;          rootDirectory-&gt;WriteObjectAny(<span class="keywordtype">object</span>, object-&gt;IsA(), writeName.c_str());</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;          TObject *reference = (*iter)-&gt;reference();</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;          <span class="keywordflow">if</span>(not refSuffix.empty() and <span class="keyword">nullptr</span> != reference) {</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;            rootDirectory-&gt;WriteObjectAny(reference, reference-&gt;IsA(), (writeName + refSuffix).c_str());</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;          }</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        }</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;      }</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;      <span class="keywordflow">return</span> STATUS_CODE_SUCCESS;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    }</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a597c9b43db92ba53af53e363a3ea839b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unique_ptr&lt;TFile&gt; dqm4hep::core::Archiver::m_file = {nullptr}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="Archiver_8h_source.html#l00163">163</a> of file <a class="el" href="Archiver_8h_source.html">Archiver.h</a>.</p>

<p>Referenced by <a class="el" href="Archiver_8cc_source.html#l00112">archive()</a>, <a class="el" href="Archiver_8cc_source.html#l00123">archiveWithReferences()</a>, <a class="el" href="Archiver_8cc_source.html#l00099">close()</a>, <a class="el" href="Archiver_8cc_source.html#l00057">open()</a>, and <a class="el" href="Archiver_8cc_source.html#l00152">prepareForAchiving()</a>.</p>

</div>
</div>
<a class="anchor" id="acce8d6d20b5a171d7251c0fd1859505d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string dqm4hep::core::Archiver::m_fileName = {&quot;&quot;}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The archive file name. </p>

<p>Definition at line <a class="el" href="Archiver_8h_source.html#l00157">157</a> of file <a class="el" href="Archiver_8h_source.html">Archiver.h</a>.</p>

<p>Referenced by <a class="el" href="Archiver_8cc_source.html#l00134">fileName()</a>, and <a class="el" href="Archiver_8cc_source.html#l00057">open()</a>.</p>

</div>
</div>
<a class="anchor" id="a9adffe73065c778afc5da4437a2d002e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool dqm4hep::core::Archiver::m_isOpened = {false}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The actual archive implementation (root file) </p>

<p>Definition at line <a class="el" href="Archiver_8h_source.html#l00161">161</a> of file <a class="el" href="Archiver_8h_source.html">Archiver.h</a>.</p>

<p>Referenced by <a class="el" href="Archiver_8cc_source.html#l00099">close()</a>, <a class="el" href="Archiver_8cc_source.html#l00140">isOpened()</a>, and <a class="el" href="Archiver_8cc_source.html#l00057">open()</a>.</p>

</div>
</div>
<a class="anchor" id="acaea9288891f6aba89e9025c7267b3b8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string dqm4hep::core::Archiver::m_openingMode = {&quot;RECREATE&quot;}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The root file opening mode. </p>
<p>Whether the archive is opened </p>

<p>Definition at line <a class="el" href="Archiver_8h_source.html#l00159">159</a> of file <a class="el" href="Archiver_8h_source.html">Archiver.h</a>.</p>

<p>Referenced by <a class="el" href="Archiver_8cc_source.html#l00099">close()</a>, <a class="el" href="Archiver_8cc_source.html#l00057">open()</a>, and <a class="el" href="Archiver_8cc_source.html#l00146">openingMode()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="Archiver_8h_source.html">Archiver.h</a></li>
<li><a class="el" href="Archiver_8cc_source.html">Archiver.cc</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Jun 10 2018 23:16:53 for DQMCore by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
